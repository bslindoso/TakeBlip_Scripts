{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"1c27dfa3-2968-40a7-bb7d-e07499eda823","type":"text/plain","content":"User input"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"f4078b7c-fd36-47ec-a5d6-57e5392cddaa","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"onboarding","root":true,"$title":"Start","$position":{"top":"73px","left":"1064px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"707ddd82-ac70-4497-ac43-7bc2760e04ea","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","typeOfStateId":"state","$connId":"con_3","$id":"8be4dbc8-c01d-43cd-823b-a4f2f99fd33b","conditions":[{"source":"input","comparison":"notExists","values":[]}],"$invalid":false},{"stateId":"error","conditions":[{"source":"input","comparison":"exists","values":[]}],"$id":"2b261064-4ccb-44a4-ae37-67890ed2d033","$connId":"con_8","$invalid":false}],"$enteringCustomActions":[{"$id":"b7d8a5e8-fe2c-4a36-827d-db4e935f9c3d","$typeOfContent":"","type":"ExecuteScript","$title":"exception","$invalid":false,"settings":{"function":"run","source":"function run(previousState, typeInput, previousId) {\n    try {\n        typeInput = JSON.parse(typeInput).input\n        let idFormated = previousState.split(' ');\n        idFormated = idFormated[0].replace(/\\[/g,'').replace(/\\]/g,'').replace(/\\./g,'');\n        const exception = {\n            id: `${idFormated}`,\n            input: '{{input.content}}',\n            redirectMenu: `${typeInput}`,\n            blockId: previousId\n        }\n        return exception\n    }\n    catch (e) {\n        return 'error'\n    }\n}","inputVariables":["state.previous.name","validInputJs","state.previous.id"],"outputVariable":"exception","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false}],"id":"fallback","$title":"Exceptions","$position":{"top":"45px","left":"2201.33px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fbf92afc-a1bf-400c-8e40-22d772bf16fa","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"66b8efe1-ec32-419c-976e-462c8dfa7384","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Exce√ß√µes","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{exception}}"},"address":"{{resource.serviceList@excecao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false}],"id":"error","$title":"[REDIRECT TO] Exce√ß√µes","$position":{"top":"33px","left":"2406px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"f4078b7c-fd36-47ec-a5d6-57e5392cddaa":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d177afe0-1fc9-47f7-8d6d-a8888d6c114c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"c0dc0550-84da-4028-ba67-457020c2a070","typeOfStateId":"state","$connId":"con_13","$id":"5469df0b-52a7-46d7-8ecc-541a1f726046","conditions":[{"source":"input","comparison":"equals","values":["voltar ao menu"]}],"$invalid":false},{"stateId":"15015b8f-d406-4f25-b7e6-9d6c10f3ae39","typeOfStateId":"state","$connId":"con_18","$id":"cd712838-f30e-4aa1-a3cf-0788a7f03719","conditions":[{"source":"input","comparison":"startsWith","values":["MENU"]}],"$invalid":false},{"stateId":"a9bb41ca-9bef-4b1d-a5ca-a3688ef77898","typeOfStateId":"state","$connId":"con_23","$id":"a67efdf5-bbfd-4800-b030-2378aacdf05f","conditions":[{"source":"context","comparison":"equals","values":["true"],"variable":"returnException"}],"$invalid":false},{"stateId":"0733133a-e5b3-4df0-a62c-59a97bc2d17a","typeOfStateId":"state","$connId":"con_28","$id":"6a92a1c2-2268-4114-a92e-ee5f30f5a409","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"98c87606-f80d-41c9-85b9-ba045acd21be","$typeOfContent":"","type":"SetVariable","$title":"SERVICE","$invalid":false,"settings":{"variable":"service","value":"boasvindas"},"conditions":[]},{"$id":"d3a5114c-7cef-4f0d-af4a-31e3c74f7d07","$typeOfContent":"","type":"ExecuteScript","$title":"GET PLATFORM","$invalid":false,"settings":{"function":"run","source":"function run(contactIdentity) {\n    return getUserChannel(contactIdentity);\n}\n\nfunction getUserChannel(contactIdentity) {\n    const DEFAULT_CHANNEL = 'default';\n    const CHANNEL_INDEX = 1;\n\n    const CHANNEL_IDENTIFIERS = {\n        'wa.gw.msging.net': 'WhatsApp',\n        '0mn.io': 'BlipChat',\n        'take.io': 'TakeSMS',\n        'messenger.gw.msging.net': 'Messenger',\n        'instagram.gw.msging.net': 'instagram',\n        'abs.gw.msging.net': 'Teams',\n        'businessmessages.gw.msging.net': 'gbm',\n        'skype.gw.msging.net': 'Skype',\n        'telegram.gw.msging.net': 'Telegram',\n        'workplace.gw.msging.net': 'Workplace',\n        'mailgun.gw.msging.net': 'Email',\n        'pagseguro.gw.msging.net': 'PageSeguro'\n    };\n\n    let contactChannelId = contactIdentity.split('@')[CHANNEL_INDEX];\n\n    return CHANNEL_IDENTIFIERS[contactChannelId] || DEFAULT_CHANNEL;\n}","inputVariables":["contact.identity"],"outputVariable":"platform","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"1e0a12c3-3bd0-45b8-9592-898a0d17fb7a","$typeOfContent":"","type":"ExecuteScript","$title":"CHANNEL TAGS","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\nfunction run(platform) {\n  return channelTags(platform);\n}","inputVariables":["platform"],"outputVariable":"channelTags","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"c185e811-51f6-4036-bb91-b84d8a08be1e","$typeOfContent":"","type":"ExecuteScript","$title":"Whatsapp Number","$invalid":false,"settings":{"function":"run","source":"function run(contact) {\n    \n    // Sem o c√≥digo do pa√≠s         \n    // let phone = contact.split(\"@\")[0].replace(\"55\", \"\");   \n\n    // Com o c√≥digo do pa√≠s\n    let phone = contact.split(\"@\")[0];   \n    let tamanho = phone.length;\n\n\n    if(tamanho == 10){\n        \n        let telefone = phone.split('').join().replace(/\\D/g, '');\n        let math = Math.floor(telefone.length - 8 ); \n        let concat = telefone.substr(0,math)+\"9\"+telefone.substr(math);\n        let retorno = concat;\n\n        return retorno;\n    } else {\n        \n        let retorno = phone\n        return retorno;\n    }\n\n}","inputVariables":["contact.identity"],"outputVariable":"wanumber","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"platform","values":["Whatsapp"]}]},{"$id":"b2c53651-fb9e-4163-b77e-5ffa56265b07","$typeOfContent":"","type":"MergeContact","$title":"Telefone: WhatsApp","$invalid":false,"settings":{"extras":{},"phoneNumber":"{{wanumber}}"},"conditions":[{"source":"context","comparison":"equals","variable":"platform","values":["Whatsapp"]},{"source":"context","comparison":"exists","values":[],"variable":"wanumber"}]},{"$id":"2b67cddf-03af-41f5-a723-07176d8344eb","$typeOfContent":"","type":"ProcessHttp","$title":"GET Whatsapp Information","$invalid":false,"settings":{"headers":{"Authorization":"{{resource.keyRouterBlip}}","Content-Type":"application/json"},"method":"POST","body":"{\n\"id\": \"{{$guid}}\",\n\"to\": \"postmaster@wa.gw.msging.net\",\n\"method\": \"get\",\n\"uri\": \"lime://wa.gw.msging.net/accounts/{{wanumber}}\"\n}","uri":"https://http.msging.net/commands","responseStatusVariable":"statusWppInfo","responseBodyVariable":"responseWppInfo"},"conditions":[{"source":"context","comparison":"equals","variable":"platform","values":["WhatsApp"]}]},{"$id":"ce22a169-7f63-4bd6-b375-ace0b1246918","$typeOfContent":"","type":"MergeContact","$title":"SET Whatsapp Full Name","$invalid":false,"settings":{"extras":{},"name":"{{responseWppInfo@resource.fullName}}"},"conditions":[{"source":"context","comparison":"equals","variable":"platform","values":["Whatsapp"]}]},{"$id":"9723fb17-392b-4ef1-ab2d-d6fa1757bb60","$typeOfContent":"","type":"SetVariable","$title":"openBold","$invalid":false,"settings":{"variable":"n1","value":"{{channelTags@bold.open}}","expiration":null},"conditions":[]},{"$id":"d6ecf2df-35e3-47bc-9895-c41306197d45","$typeOfContent":"","type":"SetVariable","$title":"closeBold","$invalid":false,"settings":{"variable":"n2","value":"{{channelTags@bold.close}}"},"conditions":[]},{"$id":"9149107e-580b-4eb3-8eb9-165b47482575","$typeOfContent":"","type":"SetVariable","$title":"openItalic","$invalid":false,"settings":{"variable":"i1","value":"{{channelTags@italic.open}}"},"conditions":[]},{"$id":"56e47675-bdb9-4f24-bd2e-83ce80b7c6c0","$typeOfContent":"","type":"SetVariable","$title":"closeItalic","$invalid":false,"settings":{"variable":"i2","value":"{{channelTags@italic.close}}"},"conditions":[]},{"$id":"bdb84258-dd8b-45a5-a69c-3a169bebf84e","$typeOfContent":"","type":"SetVariable","$title":"italicValue","$invalid":false,"settings":{"variable":"italicValue","value":"{{channelTags@italic}}"},"conditions":[]}],"$leavingCustomActions":[{"$id":"756c7936-98e7-424d-a05c-f24d09cda37c","$typeOfContent":"","type":"SetVariable","$title":"tipoAtendimento","$invalid":false,"settings":{"variable":"tipoAtendimento","value":"bot"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FF1E90","label":"HTTP Request","id":"blip-tag-d2f6d32a-8f3d-ae80-2164-881f1467e0ac","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-34536386-696f-5928-5ea7-4c06b8dfb34e","canChangeBackground":false}],"id":"f4078b7c-fd36-47ec-a5d6-57e5392cddaa","root":false,"$title":"[REQUIREMENTS]","$position":{"top":"172px","left":"1067px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#000000","textColor":"#ffffff","commentsIdList":[]}},"a9bb41ca-9bef-4b1d-a5ca-a3688ef77898":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"aebf3f0a-56ac-4466-b042-70cabc54dbf4","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"{{exception@blockId}}","typeOfStateId":"variable","$id":"9fcf28e8-21b8-40dd-8bdd-a90433c7f180","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ad440f48-87c3-4fa8-be77-43d1b0e5b835","$typeOfContent":"","type":"SetVariable","$title":"returnException","$invalid":false,"settings":{"variable":"returnException","value":"false"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"a9bb41ca-9bef-4b1d-a5ca-a3688ef77898","root":false,"$title":"Retorno Exce√ß√£o","$position":{"top":"40.25px","left":"1294px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#eb9694","textColor":"#000000"}},"23db93b0-a85a-41fa-8b51-374afe7e7b68":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Finalizar","$invalid":false,"settings":{"context":{"type":"text/plain","value":"finalizacao"},"address":"{{resource.serviceList@finalizacao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false}],"id":"23db93b0-a85a-41fa-8b51-374afe7e7b68","root":false,"$title":"[REDIRECT TO] Finaliza√ß√£o","$position":{"top":"163px","left":"2406px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"3b3a1408-7f24-45dc-b193-40fe62bb4fd7":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Transbordo","$invalid":false,"settings":{"context":{"type":"text/plain","value":"transbordo"},"address":"{{resource.serviceList@transbordo}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false}],"id":"3b3a1408-7f24-45dc-b193-40fe62bb4fd7","root":false,"$title":"[REDIRECT TO] Transbordo","$position":{"top":"291px","left":"2406px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"ace2c0c3-a756-49af-8d76-fe30066ba1ed":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fbf92afc-a1bf-400c-8e40-22d772bf16fa","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"7d31e570-2f6e-4693-9895-eb1669fe5c4d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Service","$invalid":false,"settings":{"context":{"type":"text/plain","value":"boasvindas"},"address":"{{destination}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false}],"id":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$title":"[REDIRECT TO] Service","$position":{"top":"421.75px","left":"2406.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"ffc9c039-0c20-4fd7-88e5-ddbd5186ee65":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"23db93b0-a85a-41fa-8b51-374afe7e7b68","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false}],"id":"ffc9c039-0c20-4fd7-88e5-ddbd5186ee65","root":false,"$title":"[GO TO] Finaliza√ß√£o","$position":{"top":"641px","left":"2011px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"5c234a8d-7660-4245-858f-f8867217bdf1":{"$contentActions":[{"action":{"$id":"1ed135ed-c363-4c64-be0a-7cb3ce4978a9","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"text/plain","rawContent":"{{defineText}}"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"493e83b7-831c-48d6-93fd-4a1477bc59ff","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"d8e3a838-b4c4-471e-980b-12d9187b185b","typeOfStateId":"state","$connId":"con_33","$id":"6adcc397-dd02-48aa-8824-c9c33b7a8847","conditions":[{"source":"context","comparison":"equals","values":["error"],"variable":"validaRegexMedidas@type"}],"$invalid":false},{"stateId":"449986c0-cc6a-4e52-9d43-8bd870f0e45d","typeOfStateId":"state","$connId":"con_38","$id":"02165af7-87b1-4fc3-82f5-1c9ae3ac4f90","conditions":[{"source":"context","comparison":"contains","values":["palavras"],"variable":"validaRegexMedidas@validation"}],"$invalid":false},{"stateId":"d6b51209-46ce-4431-a1c2-6eee2c769723","typeOfStateId":"state","$connId":"con_43","$id":"1b86151c-969a-44ac-b6c7-b1446b40ca16","conditions":[{"source":"context","comparison":"equals","values":["match-regex-medidas medidas"],"variable":"validaRegexMedidas@validation"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"e3d06706-4af2-4d39-bf44-a7f8a7a2a34d","$typeOfContent":"","type":"ExecuteScript","$title":"defineText","$invalid":false,"settings":{"function":"run","source":"\nfunction run(privacyPolicy) {\n\ttry {\n\t\treturn privacyPolicy ? '' : 'Se quiser conhecer nossa {{n1}}Pol√≠tica de Privacidade{{n2}}, acesse o link a seguir:\\n\\nüîó https://pneusnacional.com.br/politica-de-privacidade/'\n\t} catch (e) { return 'catch' }\n}","inputVariables":["privacyPolicy"],"outputVariable":"defineText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"c9599533-4e50-4512-94c0-17476b880c74","$typeOfContent":"","type":"SetVariable","$title":"privacyPolicy","$invalid":false,"settings":{"variable":"privacyPolicy","value":"true"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"d8e3a838-b4c4-471e-980b-12d9187b185b","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"5c234a8d-7660-4245-858f-f8867217bdf1","root":false,"$title":"Pol√≠tica de Privacidade [1]","$position":{"top":"619px","left":"1289px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[],"shape":"50% 0 50% 0"}},"aba23a3e-9882-4701-afd6-600b21babfdf":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d7ada577-de41-4e50-9c12-2bfa85cc86ae","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false}],"id":"aba23a3e-9882-4701-afd6-600b21babfdf","root":false,"$title":"[GO TO] Service","$position":{"top":"1134px","left":"1289px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]},"isAiGenerated":false},"d8e3a838-b4c4-471e-980b-12d9187b185b":{"$contentActions":[{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"1:0"},"$invalid":false}],"$conditionOutputs":[{"stateId":"3ebfd5d3-cf62-4d89-84a9-3ee840a5afba","typeOfStateId":"state","$connId":"con_48","$id":"39ddbab4-9501-408a-8d34-433c6fc0fa6f","conditions":[{"source":"context","comparison":"equals","values":["Endere√ßos/telefones"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"aba23a3e-9882-4701-afd6-600b21babfdf","typeOfStateId":"state","$connId":"con_53","$id":"91f8823d-95f0-4e50-b19b-ab291c87fb0d","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"values":["menu"],"source":"context","comparison":"equals","variable":"validInputJs@validation"}],"$invalid":false},{"stateId":"72174366-3dbc-488f-82e6-bd3991869c7d","typeOfStateId":"state","$connId":"con_58","$id":"50c045a2-e746-4674-bdc5-cfadbe3c1918","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"values":["medidasDePneu"],"source":"context","comparison":"equals","variable":"validInputJs@validation"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs, returnJs) {\n  let opt = [\"Encontrar pneus\", \"Servi√ßos/pe√ßas/√≥leo\", \"Endere√ßos/telefones\"];\n  let properties = {\n    text: `{{n1}}Como posso ajudar voc√™?{{n2}}\n\nüí° Escolha uma op√ß√£o.`,\n    options: opt,\n    values: opt,\n    description: [],\n    itens: [\n      { name: [opt[0], 'pneus'] },\n      { name: [opt[1], 'servi√ßos', 'pe√ßas', '√≥leo'] },\n      { name: [opt[2], 'endere√ßo', 'telefone'] }\n    ],\n    menuScope: {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": true\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem e exce√ß√£o no MENU\n  // if (hideInputText == 'true' || hideInputText == true) {\n  //   properties.text = sentenceOtherMistakesJs\n  // } else {\n  //   // Exibe mensagem de retorno\n  //   // if (returnJs == 'true' || returnJs == true) {\n  //   //   properties.text = 'Certo! Selecione a seguir como eu posso te ajudar hoje. üëá'\n  //   // }\n  // }\n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adi√ß√£o de op√ß√µes sem numera√ß√£o\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numera√ß√£o autom√°tica\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs","return"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"5242af1b-d006-400d-952f-0e291fda5496","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"// {{resource.FunctionGetMenu}}\n\n// const run = (platform, menu) => {\n//   menu = JSON.parse(menu);\n//   platform = platform.toLowerCase();\n\n//   if (platform == 'instagram' || platform == 'messenger') {\n//     const objMenu = {\n//       'type': `text/plain`,\n//       'content' : geraMenuNumerico(menu)\n//     }\n//     return objMenu\n//   };\n\n//   let default_msg = {\n//     \"text\": menu.text,\n//     \"header\": 'Menu',\n//     \"body\": menu.text,\n//     \"footer\": '',\n//     \"button\": 'Menu',\n//     \"title\": 'Menu',\n//     \"namespaceTemplate\": '',\n//     \"nameTemplate\": '',\n//     \"options\": menu.options,\n//     \"values\": menu.values,\n//     \"submenu\": [],\n//     \"description\": menu.description,\n//     \"menuScope\": {\n//       ... menu.menuScope,\n//       \"platform\": platform\n//     },\n//   };\n\n//   var newMenu = getMenuForPlatform(default_msg);\n\n//   return newMenu;\n// };\n\n// function geraMenuNumerico(menu) {\n//   // menu = JSON.parse(menu);\n\n//   let listaOptions = '\\n\\n';\n//   for (let i = 0; i < menu.options.length; i++) {\n//     listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n//   }\n\n//   return menu.text + listaOptions;\n// }\n\n\n{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": '',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Marcas',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      ...menu.menuScope,\n      \"platform\": platform\n    }\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"0aceb253-02f4-43ca-8d76-5aaf01b31829","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + '{{n1}}' + (i + 1) + '.{{n2}} ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"19b44b1c-95c2-4d6f-be90-4d0f0d3f8a6e","$typeOfContent":"","type":"TrackEvent","$title":"menu principal exibicao","$invalid":false,"settings":{"extras":{},"category":"menu principal exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando h√° alguma palavra reservada que o bot dever√° processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma valida√ß√£o dever√° retornar um erro para cair em exce√ß√£o\n// - success => quando a valida√ß√£o foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input ap√≥s processamento.\n// - Se type == error => o input ser√° a descri√ß√£o do erro. Ex: ERRO CEP\n// - Se type == success => o input ser√° o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual valida√ß√£o o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATEN√á√ÉO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para valida√ß√£o de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de valida√ß√£o de input vai ser  \n        //   necess√°rio (se mais de um for selecionado, apenas o mais acima ser√° validado)\n        // - erroMenuEspecial => altere somente se, caso a valida√ß√£o seja um Menu e para\n        //   este menu haja um tratamento diferente de exce√ß√£o.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO MENU HIBRIDO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que ser√° retornado pela fun√ß√£o\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usu√°rio digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata vari√°veis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Valida√ß√£o de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Din√¢mico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Valida√ß√£o de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma valida√ß√£o foi processada, retorna o input sem valida√ß√£o\n            if (processedInput.input == 'INPUT SEM VALIDA√á√ïES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"3e49378b-0cfc-437c-a67f-de8bda0fd567","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"function run(input) {\n    // =====================================================================================\n    // CONFIG\n    // =====================================================================================\n    /** POSS√çVEIS FORMATOS DE MEDIDAS\n    115 30 24\n    115/30/24\n    115/30/R24\n    115 30 R24\n    175 70 aro14\n    175/70/aro14 \n*/\n    let regex01 = /( |^)\\d{3}(\\/| )?\\d{2}(\\/| |R|r|aro)?(R|r|aro)? ?\\d{2}( |$)/g\n    let match01 = input.match(regex01)\n    // =====================================================================================\n    if (match01) {\n        let medidas = getLarguraPerfilAro(match01[0].trim())\n        if (medidas.type == 'success') {\n            return {\n                type: 'success',\n                input: input,\n                dados_identificados: {\n                    medidas: medidas.medidas\n                },\n                validation: 'medidasDePneu'\n            }\n        } else {\n            return { type: 'error', input: 'ERRO DINAMICO', validation: 'medidasDePneu' }\n        }\n    } else {\n        return { type: 'error', input: 'ERRO DINAMICO', validation: 'medidasDePneu' }\n    }\n}\n\nfunction validaPerfil(perfil) {\n    var perfis = ['30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90']\n    let validacao = perfis.includes(perfil) ? true : false\n    return validacao\n}\n\nfunction validaAro(aro) {\n    var aros = ['12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24']\n    let validacao = aros.includes(aro) ? true : false\n    return validacao\n}\n\nfunction getLarguraPerfilAro(medidas) {\n    /** POSS√çVEIS FORMATOS DE MEDIDAS\n    115 30 24\n    115/30/24\n    115/30/R24\n    115 30 R24\n    175 70 aro14\n    175/70/aro14 \n*/\n\n    let regex = /^\\d{3}(\\/| )?\\d{2}(\\/| |R|r|aro)?(R|r|aro)? ?\\d{2}$/g\n\n    if (medidas.match(regex)) {\n        while (medidas.search(' ') != -1) {\n            medidas = medidas.replace(' ', '')\n        }\n        while (medidas.search('/') != -1) {\n            medidas = medidas.replace('/', '')\n        }\n        while (medidas.search('R') != -1) {\n            medidas = medidas.replace('R', '')\n        }      \n        while (medidas.search('aro ') != -1) {\n            medidas = medidas.replace('aro ', '')\n        }\n        while (medidas.search('aro') != -1) {\n            medidas = medidas.replace('aro', '')\n        }\n        while (medidas.search('r') != -1) {\n            medidas = medidas.replace('r', '')\n        }  \n\n        let largura = medidas.slice(0, 3)\n        let perfil = medidas.slice(3, 5)\n        let aro = medidas.slice(5, 8)\n\n        // VALIDA PERFIL\n        let validPerfil = validaPerfil(perfil)\n        // VALIDA ARO\n        let validAro = validaAro(aro)\n\n        if (validPerfil && validAro) {\n            return {\n                type: 'success',\n                message: 'LARGURA, PERFIL E ARO ENCONTRADOS COM SUCESSO',\n                medidas: {\n                    largura: largura,\n                    perfil: perfil,\n                    aro: aro\n                }\n            }\n        } else {\n            return { type: 'error', message: 'ARO OU PERFIL INV√ÅLIDOS' }\n        }\n    } else {\n        return { type: 'error', message: 'MEDIDAS INV√ÅLIDAS OU N√ÉO ENCONTRADAS' }\n    }\n}","inputVariables":["input.content"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[{"values":["success"],"source":"context","comparison":"notEquals","variable":"validInputJs@type"}]},{"$id":"c145f280-a16c-4442-b8cc-5d2946cb7715","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n  let input = JSON.parse(validInput).input\n\n  getOptionSelected = (input) => {\n      const optionList = {\n          'Encontrar pneus': 'pneus',\n          'Servi√ßos/pe√ßas/√≥leo': 'servicos'\n      }\n\n      return optionList[input] || 'ERROR: NO MATCH'\n  }\n\n  return getOptionSelected(input);\n}","inputVariables":["validInputJs"],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]},{"$id":"74a21830-32af-4d9b-a82c-574bf49eb04a","$typeOfContent":"","type":"SetVariable","$title":"optMenuPrincipal","$invalid":false,"settings":{"variable":"optMenuPrincipal","value":"{{validInputJs@input}}"},"conditions":[{"values":["success"],"source":"context","comparison":"equals","variable":"validInputJs@type"},{"values":["menu"],"source":"context","comparison":"equals","variable":"validInputJs@validation"}]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"menu principal selecao","$invalid":false,"settings":{"extras":{},"category":"menu principal selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"menu principal inesperado","$invalid":false,"settings":{"extras":{},"category":"menu principal inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"0d9e71aa-d0d1-4c59-b05c-da3f5c1a3031","$typeOfContent":"","type":"MergeContact","$title":"medidas","$invalid":false,"settings":{"extras":{"medidas":"{{validInputJs@dados_identificados.medidas}}"}},"conditions":[{"values":["success"],"source":"context","comparison":"equals","variable":"validInputJs@type"}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"d8e3a838-b4c4-471e-980b-12d9187b185b","$title":"[S.0.0.4][MENU] Menu Principal","$position":{"top":"777px","left":"1521px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]},"isAiGenerated":false},"8524011e-7311-49f4-a54a-59c72724235d":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"a8147e1a-91dd-4497-8864-7548156e6ea3","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"1:0"},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"isAiGenerated":false,"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false},{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false},{"background":"#FF1E90","label":"HTTP Request","id":"blip-tag-d2f6d32a-8f3d-ae80-2164-881f1467e0ac","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-34536386-696f-5928-5ea7-4c06b8dfb34e","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false}],"id":"8524011e-7311-49f4-a54a-59c72724235d","root":false,"$title":"TAGS","$position":{"top":"0px","left":"423.667px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"15015b8f-d406-4f25-b7e6-9d6c10f3ae39":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"a323a0a9-8a78-4591-a967-3ccac7a47902","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"d8e3a838-b4c4-471e-980b-12d9187b185b","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[],"id":"15015b8f-d406-4f25-b7e6-9d6c10f3ae39","root":false,"$title":"Retorno Menu Principal","$position":{"top":"275px","left":"1676px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"bfae4833-736b-41b5-93d8-98c7aa266cee":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fbf92afc-a1bf-400c-8e40-22d772bf16fa","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"7d31e570-2f6e-4693-9895-eb1669fe5c4d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] MENU ANTERIOR","$invalid":false,"settings":{"context":{"type":"text/plain","value":"voltar ao menu"},"address":"{{lastStateWithMenu@service}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false}],"id":"bfae4833-736b-41b5-93d8-98c7aa266cee","$title":"[REDIRECT TO] Voltar ao menu anterior","$position":{"top":"562.429px","left":"2406.43px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]},"isAiGenerated":false},"c0dc0550-84da-4028-ba67-457020c2a070":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"ceccc324-c654-407d-b5b3-bbebd678b003","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"{{lastStateWithMenu@previousId}}","$invalid":false,"typeOfStateId":"variable"},"isAiGenerated":false,"$tags":[],"id":"c0dc0550-84da-4028-ba67-457020c2a070","root":false,"$title":"Voltar ao Menu","$position":{"top":"182px","left":"1676px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0733133a-e5b3-4df0-a62c-59a97bc2d17a":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"66178ec7-eb56-4153-985a-e65044b9c2ac","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"90cddd90-9baf-4baf-ae43-a7cd541378cf","typeOfStateId":"state","$connId":"con_63","$id":"79e23d55-cab7-4bde-977f-b30b8b7b2074","conditions":[{"source":"context","comparison":"equals","values":["IB01"],"variable":"validaIcebreakers@validation"}],"$invalid":false},{"stateId":"3505be97-f779-4c59-8aaa-a7170a9570ba","typeOfStateId":"state","$connId":"con_68","$id":"fe9de620-c476-4391-8b02-bf4d0803adf6","conditions":[{"source":"context","comparison":"equals","values":["IB02"],"variable":"validaIcebreakers@validation"}],"$invalid":false},{"stateId":"7b8e936e-f9ac-436e-867b-e01ff4b5d711","typeOfStateId":"state","$connId":"con_73","$id":"48ace6e1-f0d8-4e5e-8ede-ca5035f87b88","conditions":[{"source":"context","comparison":"contains","values":["IB03"],"variable":"validaIcebreakers@validation"}],"$invalid":false},{"stateId":"3271b77a-27ae-436a-94d1-eda364985841","typeOfStateId":"state","$connId":"con_78","$id":"99e2ab63-b836-44ad-a9e7-91a7cfab5180","conditions":[{"source":"context","comparison":"equals","values":["IB04"],"variable":"validaIcebreakers@validation"}],"$invalid":false},{"stateId":"90cddd90-9baf-4baf-ae43-a7cd541378cf","typeOfStateId":"state","$connId":"con_83","$id":"8b231677-4467-4ea3-a662-d2fa62a1b66f","conditions":[{"source":"context","comparison":"equals","values":["no-icebreaker"],"variable":"validaIcebreakers@validation"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"e731a517-871c-4877-9ed0-a5bbdd886898","$typeOfContent":"","type":"ExecuteScript","$title":"Valida IceBreakers","$invalid":false,"settings":{"function":"run","source":"// DEFINE LISTA DE PERFIS E AROS V√ÅLIDOS\nvar perfis = ['30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90']\nvar aros = ['12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24']\n\nfunction run(input) {\n    // =====================================================================================\n    // CONFIG\n    // =====================================================================================\n    // DEFINE OS ICEBREAKERS V√ÅLIDOS\n    // IB01 - Icebreaker geral de mais informa√ß√µes sobre PNEUS\n    // IB02 - Icebreaker geral de mais informa√ß√µes\n    // IB03 - Icebreaker detalhado por Pneu/Modelo\n    // IB04 - Icebreaker detalhado por servi√ßo\n    let ib01 = 'Ol√°! Gostaria de ter mais informa√ß√µes sobre os Pneus Goodyear.'\n    let ib02 = 'Ol√°, Gostaria de mais informa√ß√µes!'\n    let ib03 = 'Ol√°, Gostaria de saber mais sobre o'\n    let ib03_desconto = 'Ganhei um desconto de'\n    let ib04 = 'Ol√°, Gostaria de saber mais sobre o servi√ßo'\n    let ib04_01 = 'Ol√°, Gostaria de saber mais sobre '\n\n    // =====================================================================================\n    if (input == ib01) {\n        return { type: 'success', input: input, validation: 'IB01' }\n    }\n\n    if (input == ib02) {\n        return { type: 'success', input: input, validation: 'IB02' }\n    }\n\n    if (input.includes(ib04)) {\n        let dados = input.replace('Ol√°, Gostaria de saber mais sobre o servi√ßo de ', '').split(' ')\n        let link = dados.pop()\n        let servico = dados.join(' ').trim()\n        return {\n            type: 'success',\n            input: input,\n            dados_identificados: {\n\n                servico: servico,\n                link: link,\n            },\n            validation: 'IB04'\n        }\n    }\n\n    if (input.includes(ib03)) {\n        let dados = input.replace('Ol√°, Gostaria de saber mais sobre o ', '').split(' ')\n        let medidas = dados.shift()\n        let link = dados.pop()\n        let marcaModelo = dados.join(' ').trim()\n        let medidasObj = getLarguraPerfilAro(medidas)\n\n        if (medidasObj.type == 'success') {\n            medidas = medidasObj.medidas\n        } else {\n            return {\n                type: 'error',\n                input: input,\n                dados_identificados: {\n                    medidas: medidas,\n                    marcaModelo: marcaModelo,\n                    link: link,\n                    desconto: false\n                },\n                validation: 'IB03 - MEDIDAS INCORRETAS'\n            }\n        }\n\n        return {\n            type: 'success',\n            input: input,\n            dados_identificados: {\n                medidas: medidas,\n                marcaModelo: marcaModelo,\n                link: link,\n                desconto: false\n            },\n            validation: 'IB03'\n        }\n    }\n\n    if (input.includes(ib03_desconto)) {        \n        while (input.search('\\\\*') != -1) {\n            input = input.replace('*', '')\n        }\n        let valorDesconto = parseFloat(input.split('R$')[1].trim().split('.')[0])        \n        let dados = input.replace('Ol√°, Ganhei um desconto de R$ ', '').split('. ')[1].replace('E Gostaria de saber mais sobre o ', '').split(' ')               \n        let medidas = dados.shift()\n        let link = dados.pop()\n        let marcaModelo = dados.join(' ').trim()\n        let medidasObj = getLarguraPerfilAro(medidas)\n\n        if (medidasObj.type == 'success') {\n            medidas = medidasObj.medidas\n        } else {\n            return {\n                type: 'error',\n                input: input,\n                dados_identificados: {\n                    medidas: medidas,\n                    marcaModelo: marcaModelo,\n                    link: link,\n                    desconto: true,\n                    valorDesconto: valorDesconto\n                },\n                validation: 'IB03 - MEDIDAS INCORRETAS'\n            }\n        }\n\n        return {\n            type: 'success',\n            input: input,\n            dados_identificados: {\n                medidas: medidas,\n                marcaModelo: marcaModelo,\n                link: link,\n                desconto: true,\n                valorDesconto: valorDesconto\n            },\n            validation: 'IB03'\n        }\n    }\n\n    if (input.includes(ib04_01)) {\n        let dados = input.replace('Ol√°, Gostaria de saber mais sobre ', '').split(' ')\n        let link = dados.pop()\n        let servico = dados.join(' ').trim()\n        return {\n            type: 'success',\n            input: input,\n            dados_identificados: {\n\n                servico: servico,\n                link: link,\n            },\n            validation: 'IB04'\n        }\n    }\n\n    return { type: 'error', input: 'NO ICEBREAKER', validation: 'no-icebreaker' }\n\n}\n\n// =====================================================================================\n// FUN√á√ïES AUXILIARES\n// =====================================================================================\nfunction validaPerfil(perfil) {\n    let validacao = perfis.includes(perfil) ? true : false\n    return validacao\n}\n\nfunction validaAro(aro) {\n    let validacao = aros.includes(aro) ? true : false\n    return validacao\n}\n\nfunction getLarguraPerfilAro(medidas) {\n    // POSS√çVEIS FORMATOS DE MEDIDAS\n    // 115/30R24 || 115 30 24 || 115/30/24 || 115/30/R24 || 115 30 R24\n    let regex = /^\\d{3}(\\/| )?\\d{2}(\\/| |R)?(R)?\\d{2}$/g\n\n    if (medidas.match(regex)) {\n        while (medidas.search(' ') != -1) {\n            medidas = medidas.replace(' ', '')\n        }\n        while (medidas.search('/') != -1) {\n            medidas = medidas.replace('/', '')\n        }\n        while (medidas.search('R') != -1) {\n            medidas = medidas.replace('R', '')\n        }\n\n        let largura = medidas.slice(0, 3)\n        let perfil = medidas.slice(3, 5)\n        let aro = medidas.slice(5, 8)\n\n        // VALIDA PERFIL\n        let validPerfil = validaPerfil(perfil)\n        // VALIDA ARO\n        let validAro = validaAro(aro)\n\n        if (validPerfil && validAro) {\n            return {\n                type: 'success',\n                message: 'LARGURA, PERFIL E ARO ENCONTRADOS COM SUCESSO',\n                medidas: {\n                    largura: largura,\n                    perfil: perfil,\n                    aro: aro\n                }\n            }\n        } else {\n            return { type: 'error', message: 'ARO OU PERFIL INV√ÅLIDOS' }\n        }\n    } else {\n        return { type: 'error', message: 'MEDIDAS INV√ÅLIDAS OU N√ÉO ENCONTRADAS' }\n    }\n\n}\n","inputVariables":["input.content"],"outputVariable":"validaIcebreakers","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"fe9510e7-2e3b-4ac8-8fe0-4143f8b9e71d","$typeOfContent":"","type":"MergeContact","$title":"Icebreaker Servi√ßo","$invalid":false,"settings":{"extras":{"icebreaker_servico":"{{validaIcebreakers@dados_identificados.servico}}"}},"conditions":[{"values":["IB04"],"source":"context","comparison":"equals","variable":"validaIcebreakers@validation"}]},{"$id":"5771817c-4e52-4c23-8b33-88b028ad37fb","$typeOfContent":"","type":"MergeContact","$title":"medidas","$invalid":false,"settings":{"extras":{"medidas":"{{validaIcebreakers@dados_identificados.medidas}}"}},"conditions":[{"values":["IB03"],"source":"context","comparison":"equals","variable":"validaIcebreakers@validation"}]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"90cddd90-9baf-4baf-ae43-a7cd541378cf","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-34536386-696f-5928-5ea7-4c06b8dfb34e","canChangeBackground":false}],"id":"0733133a-e5b3-4df0-a62c-59a97bc2d17a","root":false,"$title":"Valida Icebreakers","$position":{"top":"337px","left":"639.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#ffb74d","textColor":"#000000"}},"90cddd90-9baf-4baf-ae43-a7cd541378cf":{"$contentActions":[{"action":{"$id":"9e986a16-cd4c-4df5-9b75-36677319110a","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"cfb2e807-01d6-452b-be49-a8fd00135abf","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"cfb2e807-01d6-452b-be49-a8fd00135abf","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"950c7822-6f8d-4c98-88be-3781fae4b698","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"text/plain","rawContent":"{{defineText}}"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"46ec7793-88be-48ac-9a3f-1fec936850d0","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false},{"action":{"$id":"fa0dc025-626a-4f86-a455-42f5e2f1da47","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"606dfb04-9414-47ab-a002-93ad9b68b579","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000},"metadata":{"#stateName":"{{state.name}}","#stateId":"{{state.id}}","#messageId":"{{input.message@id}}","#previousStateId":"{{state.previous.id}}","#previousStateName":"{{state.previous.name}}"}},"$cardContent":{"document":{"id":"606dfb04-9414-47ab-a002-93ad9b68b579","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false}],"$conditionOutputs":[{"stateId":"5c234a8d-7660-4245-858f-f8867217bdf1","typeOfStateId":"state","$connId":"con_88","$id":"72292c01-242c-4b08-9520-6181d6b853dd","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"8b4cf514-3fa5-4fb1-aa1a-a6a93bf0de35","$typeOfContent":"","type":"ExecuteScript","$title":"Valida Regex Medidas","$invalid":false,"settings":{"function":"run","source":"function run(input) {\n\t// =====================================================================================\n\t// CONFIG\n\t// =====================================================================================\n\t/** POSS√çVEIS FORMATOS DE MEDIDAS\n\t\t115 30 24\n\t\t115/30/24\n\t\t115/30/R24\n\t\t115 30 R24\n\t\t175 70 aro14\n\t\t175/70/aro14 \n\t*/\n\tlet regex01 = /( |^)\\d{3}(\\/| )?\\d{2}(\\/| |R|r|aro)?(R|r|aro)? ?\\d{2}( |$)/g\n\tlet match01 = input.match(regex01)\n\n\t// DEFINE PALAVRAS COMO ARO, COMPRAR E COMPRAR PNEU\n\tlet regex02 = /(^| )((A|a)ro|(C|c)omprar( pneu)?)( |$)/g\n\tlet match02 = input.match(regex02)\n\t// =====================================================================================\n\tif (match01) {\n\t\tlet medidas = getLarguraPerfilAro(match01[0].trim())\n\t\tif (medidas.type == 'success') {\n\t\t\treturn {\n\t\t\t\ttype: 'success',\n\t\t\t\tinput: input,\n\t\t\t\tdados_identificados: {\n\t\t\t\t\tmedidas: medidas.medidas\n\t\t\t\t},\n\t\t\t\tvalidation: 'match-regex-medidas medidas'\n\t\t\t}\n\t\t} else {\n\t\t\treturn { type: 'error', input: input, validation: 'match-regex-medidas' }\n\t\t}\n\t} else if (match02) {\n\t\treturn { type: 'success', input: input, validation: 'match-regex-medidas palavras' }\n\t} else {\n\t\treturn { type: 'error', input: input, validation: 'match-regex-medidas' }\n\t}\n}\n\n// =====================================================================================\n// FUN√á√ïES AUXILIARES\n// =====================================================================================\nfunction validaPerfil(perfil) {\n    var perfis = ['30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90']\n\tlet validacao = perfis.includes(perfil) ? true : false\n\treturn validacao\n}\n\nfunction validaAro(aro) {\n    var aros = ['12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24']\n\tlet validacao = aros.includes(aro) ? true : false\n\treturn validacao\n}\n\nfunction getLarguraPerfilAro(medidas) {\n\t/** POSS√çVEIS FORMATOS DE MEDIDAS\n\t\t115 30 24\n\t\t115/30/24\n\t\t115/30/R24\n\t\t115 30 R24\n\t\t175 70 aro14\n\t\t175/70/aro14 \n\t*/\n\tlet regex = /^\\d{3}(\\/| )?\\d{2}(\\/| |R|r|aro)?(R|r|aro)? ?\\d{2}$/g\n\n\tif (medidas.match(regex)) {\n\t\twhile (medidas.search(' ') != -1) {\n\t\t\tmedidas = medidas.replace(' ', '')\n\t\t}\n\t\twhile (medidas.search('/') != -1) {\n\t\t\tmedidas = medidas.replace('/', '')\n\t\t}\n\t\twhile (medidas.search('R') != -1) {\n\t\t\tmedidas = medidas.replace('R', '')\n\t\t}\n\t\twhile (medidas.search('aro ') != -1) {\n            medidas = medidas.replace('aro ', '')\n        }\n\t\twhile (medidas.search('aro') != -1) {\n            medidas = medidas.replace('aro', '')\n        }\n\t\twhile (medidas.search('r') != -1) {\n\t\t\tmedidas = medidas.replace('r', '')\n\t\t}\n\n\t\tlet largura = medidas.slice(0, 3)\n\t\tlet perfil = medidas.slice(3, 5)\n\t\tlet aro = medidas.slice(5, 8)\n\n\t\t// VALIDA PERFIL\n\t\tlet validPerfil = validaPerfil(perfil)\n\t\t// VALIDA ARO\n\t\tlet validAro = validaAro(aro)\n\n\t\tif (validPerfil && validAro) {\n\t\t\treturn {\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: 'LARGURA, PERFIL E ARO ENCONTRADOS COM SUCESSO',\n\t\t\t\tmedidas: {\n\t\t\t\t\tlargura: largura,\n\t\t\t\t\tperfil: perfil,\n\t\t\t\t\taro: aro\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn { type: 'error', message: 'ARO OU PERFIL INV√ÅLIDOS' }\n\t\t}\n\t} else {\n\t\treturn { type: 'error', message: 'MEDIDAS INV√ÅLIDAS OU N√ÉO ENCONTRADAS' }\n\t}\n}\n","inputVariables":["input.content"],"outputVariable":"validaRegexMedidas","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"d5ac2b37-ca49-48b2-86af-077669ecfd5c","$typeOfContent":"","type":"ExecuteScript","$title":"defineText","$invalid":false,"settings":{"function":"run","source":"function run(validaRegexMedidas) {\n\tvar text1 = `Ol√°! üëã\nEu sou o {{n1}}mec√¢nico virtual da Pneus Nacional!{{n2}} üõû`\n\n\tvar text2 = `Ol√°! üëã\nEu sou o {{n1}}mec√¢nico virtual da Pneus Nacional!{{n2}} üõû`\n\n\ttry {\n\t\tvalidaRegexMedidas = JSON.parse(validaRegexMedidas)\n\n\t\tif (validaRegexMedidas.type == 'error') {\n\t\t\treturn text1\n\t\t}\n\n\t\tif (validaRegexMedidas.type == 'success') {\n\t\t\treturn text2\n\t\t}\n\n\t\treturn text1\n\n\t} catch (e) {\n\t\treturn text1\n\t}\n}","inputVariables":["validaRegexMedidas"],"outputVariable":"defineText","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"d2aa51ec-0644-4058-b9ab-b099dbe5dfd7","$typeOfContent":"","type":"ExecuteScript","$title":"defineTracking","$invalid":false,"settings":{"function":"run","source":"function run(validaRegexMedidas) {\n\n\ttry {\n\t\tvalidaRegexMedidas = JSON.parse(validaRegexMedidas)\n\n\t\tif (validaRegexMedidas.type == 'error') {\n\t\t\treturn 'saudacao privacidade exibicao'\n\t\t}\n\n\t\tif (validaRegexMedidas.type == 'success') {\n\t\t\treturn validaRegexMedidas.validation.includes('palavras') ? 'saudacao privacidade regex comprar exibicao' : 'saudacao privacidade regex medidas exibicao'\n\n\t\t}\n\n\t} catch (e) {\n\t\treturn 'saudacao privacidade exibicao'\n\t}\n}","inputVariables":["validaRegexMedidas"],"outputVariable":"defineTracking","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"144c6e88-628c-45cc-bd59-8d9137a24629","$typeOfContent":"","type":"TrackEvent","$title":"defineTracking Exibi√ß√£o","$invalid":false,"settings":{"extras":{},"category":"{{defineTracking}}","action":"exibicao"},"conditions":[{"values":[],"source":"context","comparison":"exists","variable":"defineTracking"}]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"5c234a8d-7660-4245-858f-f8867217bdf1","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"90cddd90-9baf-4baf-ae43-a7cd541378cf","root":false,"$title":"Valida Regex Medidas","$position":{"top":"437px","left":"1288px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#ffb74d","textColor":"#000000"}},"3ebfd5d3-cf62-4d89-84a9-3ee840a5afba":{"$contentActions":[{"action":{"$id":"b26420b7-2be2-4dc0-8164-94bcb715789e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"43f8460c-067a-4ee6-8427-9fb9cf0f1882","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"43f8460c-067a-4ee6-8427-9fb9cf0f1882","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"1:0"},"$invalid":false}],"$conditionOutputs":[{"stateId":"1d669861-663e-4c4e-be39-7b340c27094f","typeOfStateId":"state","$connId":"con_93","$id":"39ddbab4-9501-408a-8d34-433c6fc0fa6f","conditions":[{"source":"context","comparison":"equals","values":["Encerrar conversa ‚ùå"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"aba23a3e-9882-4701-afd6-600b21babfdf","typeOfStateId":"state","$connId":"con_98","$id":"91f8823d-95f0-4e50-b19b-ab291c87fb0d","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs, returnJs) {\n  let opt = [\"Encontrar pneus\", \"Conhecer servi√ßos\", \"Encerrar conversa ‚ùå\"];\n  let properties = {\n    text: `üöò {{n1}}LOJA BARRO PRETO{{n2}}\nRua Araguari, 235/Barro Preto - BH\n‚òéÔ∏è (31) 3274-4155\n\nüöò {{n1}}LOJA FLORESTA{{n2}}\nAvenida do Contorno, 1986/Floresta - BH\n‚òéÔ∏è (31) 3273-5590\n\nüöò {{n1}}LOJA PAMPULHA{{n2}}\nAvenida Portugal, 4170/Belo Horizonte\n‚òéÔ∏è (31) 3492-3469\n\nüöò {{n1}}LOJA BARREIRO{{n2}}\nAvenida Olinto Meireles, 658/Belo Horizonte\n‚òéÔ∏è (31) 3500-2767\n\nüöò {{n1}}LOJA SAVASSI{{n2}}\nAvenida Nossa Senhora do Carmo, 87/Belo Horizonte\n‚òéÔ∏è (31) 3259-4140\n\nüöò {{n1}}LOJA BETIM{{n2}}\nAvenida Edm√©ia Mattos Lazzarotti, 3597/Betim\n‚òéÔ∏è (31) 3281-2029`,\n    options: opt,\n    values: opt,\n    description: [],\n    itens: [\n      { name: [opt[0], 'pneus'] },\n      { name: [opt[1], 'servi√ßos', 'pe√ßas', '√≥leo'] },\n      { name: [opt[2], 'sair', 'encerrar', 'finalizar'] }\n    ],\n    menuScope: {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": true\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem e exce√ß√£o no MENU\n  // if (hideInputText == 'true' || hideInputText == true) {\n  //   properties.text = sentenceOtherMistakesJs\n  // } else {\n  //   // Exibe mensagem de retorno\n  //   // if (returnJs == 'true' || returnJs == true) {\n  //   //   properties.text = 'Certo! Selecione a seguir como eu posso te ajudar hoje. üëá'\n  //   // }\n  // }\n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adi√ß√£o de op√ß√µes sem numera√ß√£o\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numera√ß√£o autom√°tica\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs","return"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"5d0e0adc-6290-4fa8-b587-aeab13f081cf","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"// {{resource.FunctionGetMenu}}\n\n// const run = (platform, menu) => {\n//   menu = JSON.parse(menu);\n//   platform = platform.toLowerCase();\n\n//   if (platform == 'instagram' || platform == 'messenger') {\n//     const objMenu = {\n//       'type': `text/plain`,\n//       'content' : geraMenuNumerico(menu)\n//     }\n//     return objMenu\n//   };\n\n//   let default_msg = {\n//     \"text\": menu.text,\n//     \"header\": 'Menu',\n//     \"body\": menu.text,\n//     \"footer\": '',\n//     \"button\": 'Menu',\n//     \"title\": 'Menu',\n//     \"namespaceTemplate\": '',\n//     \"nameTemplate\": '',\n//     \"options\": menu.options,\n//     \"values\": menu.values,\n//     \"submenu\": [],\n//     \"description\": menu.description,\n//     \"menuScope\": {\n//       ... menu.menuScope,\n//       \"platform\": platform\n//     },\n//   };\n\n//   var newMenu = getMenuForPlatform(default_msg);\n\n//   return newMenu;\n// };\n\n// function geraMenuNumerico(menu) {\n//   // menu = JSON.parse(menu);\n\n//   let listaOptions = '\\n\\n';\n//   for (let i = 0; i < menu.options.length; i++) {\n//     listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n//   }\n\n//   return menu.text + listaOptions;\n// }\n\n\n{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": '',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Marcas',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      ...menu.menuScope,\n      \"platform\": platform\n    }\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"19b44b1c-95c2-4d6f-be90-4d0f0d3f8a6e","$typeOfContent":"","type":"TrackEvent","$title":"enderecos telefones exibicao","$invalid":false,"settings":{"extras":{},"category":"enderecos telefones exibicao","action":"Exibicao"},"conditions":[]},{"$id":"c986c595-de16-42d0-86b9-4482004e6f92","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + '{{n1}}' + (i + 1) + '.{{n2}} ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando h√° alguma palavra reservada que o bot dever√° processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma valida√ß√£o dever√° retornar um erro para cair em exce√ß√£o\n// - success => quando a valida√ß√£o foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input ap√≥s processamento.\n// - Se type == error => o input ser√° a descri√ß√£o do erro. Ex: ERRO CEP\n// - Se type == success => o input ser√° o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual valida√ß√£o o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATEN√á√ÉO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para valida√ß√£o de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de valida√ß√£o de input vai ser  \n        //   necess√°rio (se mais de um for selecionado, apenas o mais acima ser√° validado)\n        // - erroMenuEspecial => altere somente se, caso a valida√ß√£o seja um Menu e para\n        //   este menu haja um tratamento diferente de exce√ß√£o.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO MENU HIBRIDO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que ser√° retornado pela fun√ß√£o\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usu√°rio digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata vari√°veis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Valida√ß√£o de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Din√¢mico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Valida√ß√£o de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma valida√ß√£o foi processada, retorna o input sem valida√ß√£o\n            if (processedInput.input == 'INPUT SEM VALIDA√á√ïES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"c145f280-a16c-4442-b8cc-5d2946cb7715","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n  let input = JSON.parse(validInput).input\n\n  getOptionSelected = (input) => {\n      const optionList = {\n          'Encontrar pneus': 'pneus',\n          'Conhecer servi√ßos': 'servicos'\n      }\n\n      return optionList[input] || 'ERROR: NO MATCH'\n  }\n\n  return getOptionSelected(input);\n}","inputVariables":["validInputJs"],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"enderecos telefones selecao","$invalid":false,"settings":{"extras":{},"category":"enderecos telefones selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"enderecos telefones inesperado","$invalid":false,"settings":{"extras":{},"category":"enderecos telefones inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"3ebfd5d3-cf62-4d89-84a9-3ee840a5afba","$title":"[S.0.0.5][MENU] Endere√ßos e telefones","$position":{"top":"920px","left":"1518px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"449986c0-cc6a-4e52-9d43-8bd870f0e45d":{"$contentActions":[{"action":{"$id":"7dd603b2-4139-42a3-8350-770ae44b6bac","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"5bd70d7f-7df2-461a-a1b3-fa1809489190","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5bd70d7f-7df2-461a-a1b3-fa1809489190","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"94373744-11c2-4afb-b2a2-5ce820a4364f","$typeOfContent":"text","type":"SendMessage","settings":{"id":"5056e2d0-b6f3-4ccb-aada-402d591b4617","type":"text/plain","content":"Para encontrar a melhor op√ß√£o de pneu para voc√™, precisamos confirmar as medidas.üëá","metadata":{}},"$cardContent":{"document":{"id":"5056e2d0-b6f3-4ccb-aada-402d591b4617","type":"text/plain","content":"Para encontrar a melhor op√ß√£o de pneu para voc√™, precisamos confirmar as medidas.üëá"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"79ac8f30-0a30-48ab-96a9-974b2a2e2e10","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"aba23a3e-9882-4701-afd6-600b21babfdf","typeOfStateId":"state","$connId":"con_103","$id":"b17e3020-4490-4490-b082-d8f8f2da779e","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"f3c9f875-70c9-47cb-938a-1bc6f5581146","$typeOfContent":"","type":"SetVariable","$title":"destination","$invalid":false,"settings":{"variable":"destination","value":"pneus"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"isAiGenerated":false,"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"449986c0-cc6a-4e52-9d43-8bd870f0e45d","root":false,"$title":"[S.0.0.6] Comprar, Comprar Pneu, Aro","$position":{"top":"780px","left":"1289px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1d669861-663e-4c4e-be39-7b340c27094f":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"bae05987-dc5c-4ac1-8276-2527b967871c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"0493e5f8-a17f-4d75-81c0-20c49edcdc85","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run() {\n\n  return 'pesquisa';\n}","inputVariables":[],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-bb8e8b45-c8b0-9b29-6cd8-fee9ba6347db","canChangeBackground":false}],"id":"1d669861-663e-4c4e-be39-7b340c27094f","root":false,"$title":"[GO TO] Pesquisa","$position":{"top":"1113.43px","left":"1789px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]},"isAiGenerated":false},"d6b51209-46ce-4431-a1c2-6eee2c769723":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"8fafc78a-230c-422c-af5f-78b05273b461","typeOfStateId":"state","$connId":"con_108","$id":"57e701a7-57e5-449e-bf56-92df2080c519","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"6ad43b79-bf79-46ba-b48d-fa4a947b438c","$typeOfContent":"","type":"MergeContact","$title":"medidas","$invalid":false,"settings":{"extras":{"medidas":"{{validaRegexMedidas@dados_identificados.medidas}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"8fafc78a-230c-422c-af5f-78b05273b461","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#7762E3","label":"Set Contact","id":"blip-tag-34536386-696f-5928-5ea7-4c06b8dfb34e","canChangeBackground":false}],"id":"d6b51209-46ce-4431-a1c2-6eee2c769723","$title":"Medidas identificadas","$position":{"top":"787px","left":"989px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false},"da8fdc06-fccf-49e0-8bd5-85f6171ddf69":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"bae05987-dc5c-4ac1-8276-2527b967871c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"0493e5f8-a17f-4d75-81c0-20c49edcdc85","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run() {\n\n  return 'pneus';\n}","inputVariables":[],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-bb8e8b45-c8b0-9b29-6cd8-fee9ba6347db","canChangeBackground":false}],"id":"da8fdc06-fccf-49e0-8bd5-85f6171ddf69","root":false,"$title":"[GO TO] Pneus","$position":{"top":"1138.57px","left":"1085.43px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]},"isAiGenerated":false},"4b1a06b1-9879-4815-a1d2-fa511e428eb2":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d7ada577-de41-4e50-9c12-2bfa85cc86ae","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"a729c414-1c80-4d9b-bafd-79931bc320ef","$typeOfContent":"","type":"SetVariable","$title":"destination","$invalid":false,"settings":{"variable":"destination","value":"servicos"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"4b1a06b1-9879-4815-a1d2-fa511e428eb2","root":false,"$title":"[GO TO] Servi√ßo","$position":{"top":"964.667px","left":"640.667px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]},"isAiGenerated":false},"dbb93c31-28a2-4d7f-b617-89de1ac02fb8":{"$contentActions":[{"action":{"$id":"1ed135ed-c363-4c64-be0a-7cb3ce4978a9","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"text/plain","rawContent":"{{defineText}}"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"493e83b7-831c-48d6-93fd-4a1477bc59ff","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"4b1a06b1-9879-4815-a1d2-fa511e428eb2","typeOfStateId":"state","$connId":"con_113","$id":"fb4d97f6-ed9f-4147-88b8-a9a48f2ded0d","conditions":[{"source":"context","comparison":"startsWith","values":["[S.0.0.0]"],"variable":"state.previous.name"}],"$invalid":false},{"stateId":"2e4db211-1356-4f77-86c0-d3912de4f8ea","typeOfStateId":"state","$connId":"con_118","$id":"24294f31-b850-4529-a07e-a95551df8fee","conditions":[{"source":"context","comparison":"startsWith","values":["[S.0.0.1]"],"variable":"state.previous.name"}],"$invalid":false},{"stateId":"4497ff2a-54ad-4258-859d-36d6c483ac43","typeOfStateId":"state","$connId":"con_123","$id":"44588f2b-c969-48ec-a88e-95506455b946","conditions":[{"source":"context","comparison":"startsWith","values":["[S.0.0.2]"],"variable":"state.previous.name"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"e3d06706-4af2-4d39-bf44-a7f8a7a2a34d","$typeOfContent":"","type":"ExecuteScript","$title":"defineText","$invalid":false,"settings":{"function":"run","source":"\nfunction run(privacyPolicy) {\n\ttry {\n\t\treturn privacyPolicy ? '' : 'Se quiser conhecer nossa {{n1}}Pol√≠tica de Privacidade{{n2}}, acesse o link a seguir:\\n\\nüîó https://pneusnacional.com.br/politica-de-privacidade/'\n\t} catch (e) { return 'catch' }\n}","inputVariables":["privacyPolicy"],"outputVariable":"defineText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"c9599533-4e50-4512-94c0-17476b880c74","$typeOfContent":"","type":"SetVariable","$title":"privacyPolicy","$invalid":false,"settings":{"variable":"privacyPolicy","value":"true"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"4b1a06b1-9879-4815-a1d2-fa511e428eb2","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"dbb93c31-28a2-4d7f-b617-89de1ac02fb8","root":false,"$title":"Pol√≠tica de Privacidade [0]","$position":{"top":"679px","left":"646.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[],"shape":"50% 0 50% 0"},"isAiGenerated":false},"3271b77a-27ae-436a-94d1-eda364985841":{"$contentActions":[{"action":{"$id":"8011cf57-29b8-4d4e-9bf2-60e6dc596166","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"5950a7b6-181e-47ef-9246-911e3ad96898","$typeOfContent":"text","type":"SendMessage","settings":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!","metadata":{}},"$cardContent":{"document":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"e3404eac-f744-45b5-b28e-48d8ddd0d83c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dbb93c31-28a2-4d7f-b617-89de1ac02fb8","typeOfStateId":"state","$connId":"con_128","$id":"3723eade-e339-4f80-a58e-3827d82c3183","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"a4a3d69d-48e8-4660-b488-3e0b1a0be87a","$typeOfContent":"","type":"TrackEvent","$title":"saudacao privacidade origem pagina servi√ßos exibicao","$invalid":false,"settings":{"extras":{},"category":"saudacao privacidade origem pagina servi√ßos exibicao","action":"exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"3271b77a-27ae-436a-94d1-eda364985841","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"3271b77a-27ae-436a-94d1-eda364985841","root":false,"$title":"[S.0.0.0] Sauda√ß√£o Servi√ßos","$position":{"top":"497.25px","left":"428.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"2e4db211-1356-4f77-86c0-d3912de4f8ea":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"1c459c11-3dd3-4029-a9e5-88d8cab2addf","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"551379ae-344c-48a6-8374-71680268735a","$typeOfContent":"","type":"SetVariable","$title":"destination","$invalid":false,"settings":{"variable":"destination","value":"pneus"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-3bd66a4b-ba56-e3ff-bda5-086e2b1011ab","canChangeBackground":false}],"id":"2e4db211-1356-4f77-86c0-d3912de4f8ea","root":false,"$title":"[GO TO] Pneus Tirar D√∫vidas","$position":{"top":"830px","left":"640px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000"}},"3505be97-f779-4c59-8aaa-a7170a9570ba":{"$contentActions":[{"action":{"$id":"8011cf57-29b8-4d4e-9bf2-60e6dc596166","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"5950a7b6-181e-47ef-9246-911e3ad96898","$typeOfContent":"text","type":"SendMessage","settings":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!","metadata":{}},"$cardContent":{"document":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"e3404eac-f744-45b5-b28e-48d8ddd0d83c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dbb93c31-28a2-4d7f-b617-89de1ac02fb8","typeOfStateId":"state","$connId":"con_133","$id":"3723eade-e339-4f80-a58e-3827d82c3183","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"a4a3d69d-48e8-4660-b488-3e0b1a0be87a","$typeOfContent":"","type":"TrackEvent","$title":"saudacao privacidade origem homepage exibicao","$invalid":false,"settings":{"extras":{},"category":"saudacao privacidade origem homepage exibicao","action":"exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"3505be97-f779-4c59-8aaa-a7170a9570ba","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"3505be97-f779-4c59-8aaa-a7170a9570ba","root":false,"$title":"[S.0.0.1] Mais informa√ß√µes","$position":{"top":"498px","left":"638.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"7b8e936e-f9ac-436e-867b-e01ff4b5d711":{"$contentActions":[{"action":{"$id":"8011cf57-29b8-4d4e-9bf2-60e6dc596166","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"78ade02a-09ef-4cbe-bf98-37179fc592c5","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"5950a7b6-181e-47ef-9246-911e3ad96898","$typeOfContent":"text","type":"SendMessage","settings":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!\n\n{{n1}}J√° identifiquei o pneu que voc√™ procura.{{n2}} ‚úÖ","metadata":{}},"$cardContent":{"document":{"id":"6fec836f-f659-45bb-bf5d-6601de21ae1b","type":"text/plain","content":"Ol√°! üëã\nEu sou o mec√¢nico virtual da Pneus Nacional!\n\n{{n1}}J√° identifiquei o pneu que voc√™ procura.{{n2}} ‚úÖ"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"e3404eac-f744-45b5-b28e-48d8ddd0d83c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dbb93c31-28a2-4d7f-b617-89de1ac02fb8","typeOfStateId":"state","$connId":"con_138","$id":"3723eade-e339-4f80-a58e-3827d82c3183","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"a4a3d69d-48e8-4660-b488-3e0b1a0be87a","$typeOfContent":"","type":"TrackEvent","$title":"saudacao privacidade origem compra site exibicao","$invalid":false,"settings":{"extras":{},"category":"saudacao privacidade origem compra site exibicao","action":"exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"7b8e936e-f9ac-436e-867b-e01ff4b5d711","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"7b8e936e-f9ac-436e-867b-e01ff4b5d711","root":false,"$title":"[S.0.0.2] Sauda√ß√£o Pneus","$position":{"top":"494.25px","left":"839.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"ff168b54-0a0b-4357-9202-a43d8d44b721":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"030ea2c3-c18d-4e59-ad4e-011ecb30a825","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"4497ff2a-54ad-4258-859d-36d6c483ac43","typeOfStateId":"state","$connId":"con_143","$id":"ae4347a2-2bb5-40c9-a0fa-14ce439a9d5f","conditions":[{"source":"context","comparison":"equals","values":["1"],"variable":"countTries"}],"$invalid":false},{"stateId":"e62c224e-7506-4b9a-95fb-a23ab83d55aa","typeOfStateId":"state","$connId":"con_148","$id":"100a40a1-f4f1-4ef6-b19a-05e554205e28","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0e88f553-f5ab-4edc-8aa5-56ffd5136b70","$typeOfContent":"","type":"ExecuteScript","$title":"countTries","$invalid":false,"settings":{"function":"run","source":"function run(countTries) {\n\ttry {\n\t\tcountTries = parseInt(countTries)\n\t\treturn countTries += 1\n\t} catch (e) {\n\t\treturn 1\n\t}\t\n\t\n}","inputVariables":["countTries"],"outputVariable":"countTries","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"e62c224e-7506-4b9a-95fb-a23ab83d55aa","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#FF961E","label":"executeScript","id":"blip-tag-10da33cd-3fdf-48d2-f8c7-275ffd02103c","canChangeBackground":false}],"id":"ff168b54-0a0b-4357-9202-a43d8d44b721","root":false,"$title":"[API Exception]","$position":{"top":"1216px","left":"772px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e62c224e-7506-4b9a-95fb-a23ab83d55aa":{"$contentActions":[{"action":{"$id":"19f0dd00-01da-45bb-9e63-61ed9e347f15","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"6968b02f-9867-455a-9934-8863d2c5894b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"6968b02f-9867-455a-9934-8863d2c5894b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b10c942b-2599-4b55-9a8b-25a1803a7b7b","$typeOfContent":"text","type":"SendMessage","settings":{"id":"f2eccb3f-9dd3-4473-8949-075998f24346","type":"text/plain","content":"Desculpe! No momento nosso sistema n√£o est√° respondendo. ","metadata":{}},"$cardContent":{"document":{"id":"f2eccb3f-9dd3-4473-8949-075998f24346","type":"text/plain","content":"Desculpe! No momento nosso sistema n√£o est√° respondendo. "},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"0488d1ba-e4b6-4b1e-a7dc-dbfa1447415d","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"3097d80c-07ba-4bd4-8607-f6bae2b059aa","$typeOfContent":"","type":"SetVariable","$title":"countTries","$invalid":false,"settings":{"variable":"countTries","value":"0"},"conditions":[]},{"$id":"d32d53f1-f3ce-4d6d-b119-de56e45d4820","$typeOfContent":"","type":"TrackEvent","$title":"erro formato exibicao","$invalid":false,"settings":{"extras":{},"category":"erro formato exibicao","action":"exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ffc9c039-0c20-4fd7-88e5-ddbd5186ee65","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false},{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"e62c224e-7506-4b9a-95fb-a23ab83d55aa","root":false,"$title":"[E.0.1.2] Erro API","$position":{"top":"1334px","left":"774px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"57bcd1b3-c149-4094-8eeb-863442fc399b":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"5ebb06a2-7305-4b1b-91ff-0471778d4c5e","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"b90eabe3-f6a6-411c-b079-de750cfd0311","$typeOfContent":"","type":"TrackEvent","$title":"mensagem retorno pneus exibicao","$invalid":false,"settings":{"extras":{},"category":"mensagem retorno pneus exibicao","action":"exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"da8fdc06-fccf-49e0-8bd5-85f6171ddf69","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"57bcd1b3-c149-4094-8eeb-863442fc399b","root":false,"$title":"Encontrei","$position":{"top":"1259px","left":"523px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"4497ff2a-54ad-4258-859d-36d6c483ac43":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"c495669f-2c10-47c4-9800-77529effe7c0","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"57bcd1b3-c149-4094-8eeb-863442fc399b","typeOfStateId":"state","$connId":"con_153","$id":"57d0b222-22a4-4239-aea1-0f81e443dcde","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"listaPneus@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"d5643367-c3ad-4439-b5c2-765f2225ce23","$typeOfContent":"","type":"ExecuteScript","$title":"encode Medidas + Modelo","$invalid":false,"settings":{"function":"run","source":"function run(icebreaker) {\n\ttry {\n\t\ticebreaker = JSON.parse(icebreaker)\n\n\t\treturn `${icebreaker.dados_identificados.medidas.largura}/${icebreaker.dados_identificados.medidas.perfil}R${icebreaker.dados_identificados.medidas.aro} ${icebreaker.dados_identificados.marcaModelo}`\n\n\t} catch (e) {\n\t\treturn `ERRO SCRIPT: ${e}`\n\t}\n}","inputVariables":["validaIcebreakers"],"outputVariable":"encode","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"26a0986d-58d2-4ac6-8571-9300d46de33e","$typeOfContent":"","type":"ProcessHttp","$title":"Requisi√ß√£o HTTP","$invalid":false,"settings":{"headers":{"Authorization":"Basic Y2tfZGExYmI4ZDRmNTI2YjNlMDE3MmI2MTc1ZjVjNDVhNzg1MmZiN2YzZTpjc19lMWM0NzY2YWQxN2ExMjM2NWQ2MGIxNDc1ZjI3ZjBkNzMzNmYyZDQz"},"method":"GET","uri":"https://pneusnacional.com.br/wc-api/v3/products?filter[q]={{encode}}&filter[post_status]=publish&fields=title,price,featured_src","responseStatusVariable":"statusGetPneus","responseBodyVariable":"responseGetPneus"},"conditions":[{"values":[],"source":"context","comparison":"exists","variable":"contact.extras.medidas"}]},{"$id":"5d98aa9a-8c34-4020-a95f-03dd3b7bcf1a","$typeOfContent":"","type":"ExecuteScript","$title":"listaPneus","$invalid":false,"settings":{"function":"run","source":"function run(status, response) {\n\ttry {\n\t\t\n\t\tresponse = JSON.parse(response)\n\n\t\tlet validaStatus = (status >= 200 && status <= 299) ? true : false\n\n\t\tif (validaStatus) {\n\t\t\tif (response.products.length > 0) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'success',\t\t\t\t\t\n\t\t\t\t\tstatus: status,\n\t\t\t\t\tresponse: response,\n\t\t\t\t\ttotal: response.products.length\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'empty error',\n\t\t\t\t\tinput: `N√ÉO ENCONTRADO NENHUM PNEU`,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\tresponse: response\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: 'status error',\n\t\t\t\tinput: `ERRO DE API`,\n\t\t\t\tstatus: status,\n\t\t\t\tresponse: response\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\treturn {\n\t\t\ttype: 'script error',\n\t\t\tinput: `ERRO DE SCRIPT`,\n\t\t\tstatus: status,\n\t\t\tresponse: response,\n\t\t\terror: e\n\t\t}\n\t}\n\n}","inputVariables":["statusGetPneus","responseGetPneus"],"outputVariable":"listaPneus","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ff168b54-0a0b-4357-9202-a43d8d44b721","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#FF1E90","label":"HTTP Request","id":"blip-tag-18211bad-4fa0-18bc-76b0-5aaf2cc784d8","canChangeBackground":false}],"id":"4497ff2a-54ad-4258-859d-36d6c483ac43","root":false,"$title":"API Busca Pneu","$position":{"top":"1079px","left":"641px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#f06292","textColor":"#000000","commentsIdList":[]}},"8fafc78a-230c-422c-af5f-78b05273b461":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"48797c4b-7ba3-487f-9257-e53a1eacf479","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"3c8e6fdf-8e30-49f2-8fac-cd3ebd07eb1b","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run() {\n\n  return 'pneus';\n}","inputVariables":[],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ace2c0c3-a756-49af-8d76-fe30066ba1ed","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-2950aeab-5ffc-4bfb-8c0d-5677eb652059","canChangeBackground":false}],"id":"8fafc78a-230c-422c-af5f-78b05273b461","root":false,"$title":"[GO TO] CP.0.0.2 Consulta Pneus","$position":{"top":"980px","left":"916px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000"}},"72174366-3dbc-488f-82e6-bd3991869c7d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"48797c4b-7ba3-487f-9257-e53a1eacf479","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"7ff9c546-8def-4aee-ba57-98141c74229c","$typeOfContent":"","type":"Redirect","$title":"Redirecionar a um servi√ßo","$invalid":false,"settings":{"context":{"type":"text/plain","value":"goToConsultaPneus"},"address":"pneus"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-31fd5180-97e8-b29a-b296-110803b6277e","canChangeBackground":false}],"id":"72174366-3dbc-488f-82e6-bd3991869c7d","root":false,"$title":"[REDIRECT TO] CP.0.0.2 Consulta Pneus","$position":{"top":"768px","left":"1719px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"3b45047c-92b9-47b8-beed-a2039aacab21":{"$contentActions":[{"action":{"$id":"b26420b7-2be2-4dc0-8164-94bcb715789e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"43f8460c-067a-4ee6-8427-9fb9cf0f1882","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"43f8460c-067a-4ee6-8427-9fb9cf0f1882","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"1:0"},"$invalid":false}],"$conditionOutputs":[{"stateId":"8fafc78a-230c-422c-af5f-78b05273b461","typeOfStateId":"state","$connId":"con_158","$id":"39ddbab4-9501-408a-8d34-433c6fc0fa6f","conditions":[{"source":"context","comparison":"equals","values":["Sim"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"da8fdc06-fccf-49e0-8bd5-85f6171ddf69","typeOfStateId":"state","$connId":"con_163","$id":"91f8823d-95f0-4e50-b19b-ab291c87fb0d","conditions":[{"source":"context","comparison":"equals","values":["N√£o"],"variable":"validInputJs@input"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs, returnJs) {\n  let opt = [\"Sim\", \"N√£o\"];\n  let properties = {\n    text: `Para confirmar, o pneu que voc√™ busca tem estas medidas?\n\n{{n1}}{{validaRegexMedidas@dados_identificados.medidas.largura}}/{{validaRegexMedidas@dados_identificados.medidas.perfil}}/R{{validaRegexMedidas@dados_identificados.medidas.aro}}{{n2}}`,\n    options: opt,\n    values: opt,\n    description: [],\n    itens: [\n      { name: [opt[0], 'ok', 'claro', 'certo', 'continuar'] },\n      { name: [opt[1], 'nao', 'errado'] }\n    ],\n    menuScope: {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": true,\n      \"blipchatMenu\": false,\n      \"defaultText\": false\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem e exce√ß√£o no MENU\n  // if (hideInputText == 'true' || hideInputText == true) {\n  //   properties.text = sentenceOtherMistakesJs\n  // } else {\n  //   // Exibe mensagem de retorno\n  //   // if (returnJs == 'true' || returnJs == true) {\n  //   //   properties.text = 'Certo! Selecione a seguir como eu posso te ajudar hoje. üëá'\n  //   // }\n  // }\n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adi√ß√£o de op√ß√µes sem numera√ß√£o\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numera√ß√£o autom√°tica\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs","return"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"883bf2cd-bbd8-4a3f-a8f4-f9b4d6b59a49","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"// {{resource.FunctionGetMenu}}\n\n// const run = (platform, menu) => {\n//   menu = JSON.parse(menu);\n//   platform = platform.toLowerCase();\n\n//   if (platform == 'instagram' || platform == 'messenger') {\n//     const objMenu = {\n//       'type': `text/plain`,\n//       'content' : geraMenuNumerico(menu)\n//     }\n//     return objMenu\n//   };\n\n//   let default_msg = {\n//     \"text\": menu.text,\n//     \"header\": 'Menu',\n//     \"body\": menu.text,\n//     \"footer\": '',\n//     \"button\": 'Menu',\n//     \"title\": 'Menu',\n//     \"namespaceTemplate\": '',\n//     \"nameTemplate\": '',\n//     \"options\": menu.options,\n//     \"values\": menu.values,\n//     \"submenu\": [],\n//     \"description\": menu.description,\n//     \"menuScope\": {\n//       ... menu.menuScope,\n//       \"platform\": platform\n//     },\n//   };\n\n//   var newMenu = getMenuForPlatform(default_msg);\n\n//   return newMenu;\n// };\n\n// function geraMenuNumerico(menu) {\n//   // menu = JSON.parse(menu);\n\n//   let listaOptions = '\\n\\n';\n//   for (let i = 0; i < menu.options.length; i++) {\n//     listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n//   }\n\n//   return menu.text + listaOptions;\n// }\n\n\n{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": '',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Marcas',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      ...menu.menuScope,\n      \"platform\": platform\n    }\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"a968d022-86f5-4cd6-92fb-1ab5fe02be07","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + '{{n1}}' + (i + 1) + '.{{n2}} ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"19b44b1c-95c2-4d6f-be90-4d0f0d3f8a6e","$typeOfContent":"","type":"TrackEvent","$title":"saudacao confirmacao medidas exibicao","$invalid":false,"settings":{"extras":{},"category":"saudacao confirmacao medidas exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando h√° alguma palavra reservada que o bot dever√° processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma valida√ß√£o dever√° retornar um erro para cair em exce√ß√£o\n// - success => quando a valida√ß√£o foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input ap√≥s processamento.\n// - Se type == error => o input ser√° a descri√ß√£o do erro. Ex: ERRO CEP\n// - Se type == success => o input ser√° o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual valida√ß√£o o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATEN√á√ÉO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para valida√ß√£o de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de valida√ß√£o de input vai ser  \n        //   necess√°rio (se mais de um for selecionado, apenas o mais acima ser√° validado)\n        // - erroMenuEspecial => altere somente se, caso a valida√ß√£o seja um Menu e para\n        //   este menu haja um tratamento diferente de exce√ß√£o.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO MENU HIBRIDO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que ser√° retornado pela fun√ß√£o\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usu√°rio digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata vari√°veis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Valida√ß√£o de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Din√¢mico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Valida√ß√£o de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma valida√ß√£o foi processada, retorna o input sem valida√ß√£o\n            if (processedInput.input == 'INPUT SEM VALIDA√á√ïES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"c145f280-a16c-4442-b8cc-5d2946cb7715","$typeOfContent":"","type":"ExecuteScript","$title":"destination","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n  let input = JSON.parse(validInput).input\n\n  getOptionSelected = (input) => {\n      const optionList = {\n          'Encontrar pneus': 'pneus',\n          'Conhecer servi√ßos': 'servicos'\n      }\n\n      return optionList[input] || 'ERROR: NO MATCH'\n  }\n\n  return getOptionSelected(input);\n}","inputVariables":["validInputJs"],"outputVariable":"destination","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"saudacao confirmacao medidas selecao","$invalid":false,"settings":{"extras":{},"category":"saudacao confirmacao medidas selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"saudacao confirmacao medidas inesperado","$invalid":false,"settings":{"extras":{},"category":"saudacao confirmacao medidas inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"6ad43b79-bf79-46ba-b48d-fa4a947b438c","$typeOfContent":"","type":"MergeContact","$title":"medidas","$invalid":false,"settings":{"extras":{"medidas":"{{validaRegexMedidas@dados_identificados.medidas}}"}},"conditions":[{"values":["Sim"],"source":"context","comparison":"equals","variable":"validInputJs@input"}]},{"$id":"5d926ff2-4f14-4484-800c-fbec35d44b20","$typeOfContent":"","type":"SetVariable","$title":"validaRegexMedidas","$invalid":false,"settings":{"variable":"validaRegexMedidas"},"conditions":[{"values":["N√£o"],"source":"context","comparison":"equals","variable":"validInputJs@input"}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"3b45047c-92b9-47b8-beed-a2039aacab21","$title":"[S.0.0.8][MENU] Medidas identificadas [BKP]","$position":{"top":"30px","left":"2662px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"isAiGenerated":false}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"b476da42-cd34-4d21-9001-5e0bc0d470fc","$typeOfContent":"","type":"ExecuteScript","$title":"SET lastStateWithContent","$invalid":false,"settings":{"function":"run","source":"function run(stateName, stateId, previousStateName = null, previousStateId = null, service) {\n    return {\n        name: stateName,\n        id: stateId,\n        previousName: previousStateName,\n        previousId: previousStateId,\n        service: service\n    }\n}","inputVariables":["state.name","state.id","state.previous.name","state.previous.id","service"],"outputVariable":"lastStateWithContent"},"conditions":[{"$$hashKey":"object:17508","values":["[CONTENT]"],"source":"context","comparison":"contains","variable":"state.name"}]},{"$id":"478a4133-dea6-444f-b7fd-5dc9e1325d09","$typeOfContent":"","type":"ExecuteScript","$title":"SET lastStateWithMenu","$invalid":false,"settings":{"function":"run","source":"function run(stateName, stateId, previousStateName = null, previousStateId = null, service) {\n    return {\n        name: stateName,\n        id: stateId,\n        previousName: previousStateName,\n        previousId: previousStateId,\n        service: service\n    }\n}","inputVariables":["state.nam","state.id","state.previous.name","state.previous.id","service"],"outputVariable":"lastStateWithMenu"},"conditions":[{"$$hashKey":"object:2004","values":["[MENU]"],"source":"context","comparison":"contains","variable":"state.name"}]}],"$leavingCustomActions":[{"$id":"6599441d-0eaa-401e-b8af-549895c6e7f8","$typeOfContent":"","type":"ExecuteScript","$title":"SET lastStateWithInput","$invalid":false,"settings":{"function":"run","source":"function run(stateName, stateId, previousStateName = null, previousStateId = null, service) {\n    return {\n        name: stateName,\n        id: stateId,\n        previousName: previousStateName,\n        previousId: previousStateId,\n        service: service\n    }\n}","inputVariables":["state.name","state.id","state.previous.name","state.previous.id","service"],"outputVariable":"lastStateWithInput"},"conditions":[{"$$hashKey":"object:18509","values":["[INPUT]"],"source":"context","comparison":"contains","variable":"state.name"}]},{"$id":"0651141f-1ba6-487d-88e3-c6f625e9e566","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}
{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"e46361e2-38f5-4e9b-9ea8-7d7795f3712f","type":"text/plain","content":"User input"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"713f5ae5-024c-48ce-a665-476b11ff8d12","$connId":"con_3","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Start","$position":{"top":"135.5px","left":"376.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d514b2b9-4f0c-421c-9f79-9fa54ff89dcc","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:1126"}],"$conditionOutputs":[{"stateId":"377afe1e-202d-4223-9c32-b36c39c0b811","typeOfStateId":"state","$connId":"con_8","$id":"a2218525-d54a-4459-8b4e-2ad124f0ad8e","conditions":[{"source":"input","comparison":"notExists","values":[],"$$hashKey":"object:1150"}],"$invalid":false,"$$hashKey":"object:1141"},{"stateId":"377afe1e-202d-4223-9c32-b36c39c0b811","typeOfStateId":"state","$connId":"con_288","$id":"1a305d89-8f67-4c09-b258-ea3746b7f5b2","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:1160"}],"$invalid":false,"$$hashKey":"object:1142"}],"$enteringCustomActions":[{"$id":"0160eb16-c120-4889-8151-6c8d4967e5b6","$typeOfContent":"","type":"ExecuteScript","$title":"exception","$invalid":false,"settings":{"function":"run","source":"function run(previousState, typeInput, previousId) {\n    try {\n        typeInput = JSON.parse(typeInput).input\n        let idFormated = previousState.split(' ');\n        idFormated = idFormated[0].replace(/\\[/g,'').replace(/\\]/g,'').replace(/\\./g,'');\n        const exception = {\n            id: `${idFormated}`,\n            input: '{{input.content}}',\n            redirectMenu: `${typeInput}`,\n            blockId: previousId\n        }\n        return exception\n    }\n    catch (e) {\n        return 'error'\n    }\n}","inputVariables":["state.previous.name","validInputJs","state.previous.id"],"outputVariable":"exception","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF961E","label":"executeScript","id":"blip-tag-10da33cd-3fdf-48d2-f8c7-275ffd02103c","canChangeBackground":false}],"id":"fallback","$title":"Exceptions","$position":{"top":"122px","left":"877px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f961d4b1-ed0e-4055-8a4c-65a8c884cedb","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8","typeOfStateId":"state","$connId":"con_18","$id":"4c701ca2-f14b-44c6-a2e2-8a66dc700445","conditions":[{"source":"context","comparison":"equals","values":["true"],"variable":"returnException"}],"$invalid":false},{"stateId":"05f0f06c-3706-4651-927e-eeea9e741074","typeOfStateId":"state","$connId":"con_23","$id":"547fe83f-0afb-43c2-916c-a7a82bca8415","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"fdc1d3a5-3c54-4f20-936f-e3b3dd4d1ddd","$typeOfContent":"","type":"SetVariable","$title":"service","$invalid":false,"settings":{"variable":"service","value":"botsimples"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"welcome","$title":"[REQUERIMENTS]","$position":{"top":"236.75px","left":"377.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#000000","textColor":"#ffffff"}},"c9d0c48a-7d6b-468b-9458-41577eea43f7":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"961b617f-70a1-4418-a379-59a830c35586","typeOfStateId":"state","$connId":"con_28","$id":"57e7fe61-8fe6-481a-8b73-2e50c56948e3","conditions":[{"source":"context","comparison":"contains","values":["Menu Principal"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"{{goToBlock}}","typeOfStateId":"variable","$id":"1fe2061a-5a33-4da1-94a8-a54d5bbdd380","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': 'Eu trouxe aqui algumas opções sobre a mentoria {{n1}}Jogo da Vida.{{n2}}\\n\\nAgora selecione qual opção gostaria de falar clicando no {{n1}}menu{{n2}} abaixo:',\n    'options': [\"Quero comprar\", \"Tirar dúvidas\", \"Problemas com acesso\", \"Financeiro\", \"Problemas com conteúdo\",\n      \"Falar sobre bônus\", \"Mentoria ao vivo\", \"Cancelamento\", \"↩️ Menu principal\"],\n    'values': [\"Quero comprar\", \"Tirar dúvidas\", \"Problemas com acesso\", \"Financeiro\", \"Problemas com conteúdo\",\n      \"Falar sobre bônus\", \"Mentoria ao vivo\", \"Cancelamento\", \"Menu principal\"],\n    'description': [],\n    'itens': [\n      { name: ['Quero comprar'] },\n      { name: ['Tirar dúvidas'] },\n      { name: ['Problemas com acesso'] },\n      { name: ['Financeiro'] },\n      { name: ['Problemas com conteúdo'] },\n      { name: ['Falar sobre bônus'] },\n      { name: ['Mentoria ao vivo'] },\n      { name: ['Cancelamento'] },\n      { name: ['Menu principal', 'menu', 'menu principal', '↩️ Menu principal'] }\n    ]\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": false,\n      \"whatsappList\": true,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"6146ae07-d367-4b08-9daa-f2a8e356a3fc","$typeOfContent":"","type":"TrackEvent","$title":"menu mentoria jogo da vida exibicao","$invalid":false,"settings":{"extras":{},"category":"menu mentoria jogo da vida exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"640047e1-7ccc-4750-a60d-853afa6055ac","$typeOfContent":"","type":"ExecuteScript","$title":"goToBlock","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n    let input = JSON.parse(validInput).input\n\n    goToBlock = (input) => {\n        const optionList = {\n            'Quero comprar': 'f95c78ee-3f19-4994-a7fa-94d882f0a166',\n            'Tirar dúvidas': 'a07dfef2-c0a2-457d-98cb-29db278066c6',\n            'Problemas com acesso': '8420c2db-e4c5-481b-983c-257ba939db2c',\n            'Financeiro': 'b2037e92-ce8a-417d-8ae4-8d1525880308',\n            'Problemas com conteúdo': '1a3395c2-6489-4bed-b251-a798135e9ba7',\n            'Falar sobre bônus': 'be958103-3c49-45d5-ab8d-0263edbf8636',\n            'Mentoria ao vivo': '0ea7603a-79b5-4fed-8e55-5206d4384084',\n            'Cancelamento': '3e4f6503-2908-439b-b812-985c98f0def2',            \n        }\n\n        return optionList[input] || 'ERROR: NO MATCH'\n    }\n\n    return goToBlock(input);\n}","inputVariables":["validInputJs"],"outputVariable":"goToBlock","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"menu mentoria jogo da vida selecao","$invalid":false,"settings":{"extras":{},"category":"menu mentoria jogo da vida selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"menu mentoria jogo da vida input inesperado","$invalid":false,"settings":{"extras":{},"category":"menu mentoria jogo da vida input inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"5325886b-c37b-4af2-a936-3741cc8f1641","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"c9d0c48a-7d6b-468b-9458-41577eea43f7","$title":"[JV.1.0.1] [MENU] - Jogo da Vida","$position":{"top":"495px","left":"378px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"377afe1e-202d-4223-9c32-b36c39c0b811":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f4a76ec3-f892-4cad-ad43-60297c09eb7b","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"3fb7ef00-299c-4276-8405-acb5cf3a78a4","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Exceções","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{exception}}"},"address":"{{serviceList@excecao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"377afe1e-202d-4223-9c32-b36c39c0b811","$title":"[REDIRECT TO] Exceções","$position":{"top":"122px","left":"1061px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"20f2a16a-1d69-47d1-9a24-d087fc0b331b":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"3ed14941-bd24-4013-a18d-1f4c6e4ace91","$typeOfContent":"","type":"SetVariable","$title":"clearException","$invalid":false,"settings":{"variable":"exception"},"conditions":[]}],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Finalizar","$invalid":false,"settings":{"context":{"type":"text/plain","value":"ola"},"address":"{{serviceList@finalizacao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"20f2a16a-1d69-47d1-9a24-d087fc0b331b","root":false,"$title":"[REDIRECT TO] Finalizar","$position":{"top":"253.5px","left":"1062.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"79699b3e-9792-4285-afc5-b5aa42552260":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"6d96947e-81eb-4195-9a03-8a7f8906e5eb","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"7455ae48-cff1-4bbb-b8f7-34f0ecea3ba1","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Menu Principal","$invalid":false,"settings":{"context":{"type":"text/plain","value":"Menu"},"address":"{{serviceList@boas_vindas}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"79699b3e-9792-4285-afc5-b5aa42552260","root":false,"$title":"[REDIRECT TO] Menu Principal","$position":{"top":"387px","left":"1061px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"aebf3f0a-56ac-4466-b042-70cabc54dbf4","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:1443"}],"$conditionOutputs":[{"stateId":"{{exception@blockId}}","typeOfStateId":"variable","$id":"35fb96e1-c5fa-463f-b82f-b328a40d881a","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:1452"}],"$invalid":false,"$$hashKey":"object:1445"}],"$enteringCustomActions":[{"$id":"ad440f48-87c3-4fa8-be77-43d1b0e5b835","$typeOfContent":"","type":"SetVariable","$title":"returnException","$invalid":false,"settings":{"variable":"returnException","value":"false"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8","root":false,"$title":"Retorno Exceção","$position":{"top":"137.75px","left":"583.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#eb9694","textColor":"#000000","commentsIdList":[]}},"05f0f06c-3706-4651-927e-eeea9e741074":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"485af9e8-effc-4a98-b36c-e26769c42192","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"c9d0c48a-7d6b-468b-9458-41577eea43f7","typeOfStateId":"state","$connId":"con_33","$id":"48ae6809-3e0b-46ac-a0c1-44724cd5a80d","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0c7a7d7a-e245-4d09-9525-b928f1aaf2cc","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"05f0f06c-3706-4651-927e-eeea9e741074","root":false,"$title":"[JV.1.0.0]","$position":{"top":"366.25px","left":"377px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"f95c78ee-3f19-4994-a7fa-94d882f0a166":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"e1b19d88-6e42-46c9-97d5-1aa799b06b61","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"1ff59a27-4c31-4820-acba-db2efaefd803","typeOfStateId":"state","$connId":"con_38","$id":"35f6e175-157e-4bdb-993b-4af873fcab37","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"1ff59a27-4c31-4820-acba-db2efaefd803","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"f95c78ee-3f19-4994-a7fa-94d882f0a166","root":false,"$title":"Quero comprar","$position":{"top":"965px","left":"318px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"a07dfef2-c0a2-457d-98cb-29db278066c6":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"45e19b7a-6ec6-4606-8b51-4dfe811621e4","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"451786bc-70d7-4a5a-9149-449908148051","typeOfStateId":"state","$connId":"con_43","$id":"18ead804-2558-4e01-a06f-f1e8f77685ad","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"451786bc-70d7-4a5a-9149-449908148051","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"a07dfef2-c0a2-457d-98cb-29db278066c6","root":false,"$title":"Tirar dúvidas","$position":{"top":"968px","left":"507px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"8420c2db-e4c5-481b-983c-257ba939db2c":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"08fbfd6d-f577-4ea7-a221-803b52a5bd4c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"724997bd-f725-4ea0-a71f-1bdf120ccc6c","typeOfStateId":"state","$connId":"con_48","$id":"d7028f13-ae00-4ed6-98cf-fced04c322f1","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"724997bd-f725-4ea0-a71f-1bdf120ccc6c","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"8420c2db-e4c5-481b-983c-257ba939db2c","root":false,"$title":"Problemas com acesso","$position":{"top":"961px","left":"696px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"b2037e92-ce8a-417d-8ae4-8d1525880308":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fe795c7d-82e4-443a-9cb5-0df861e548a6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"a6b4b145-bdd6-4a97-a56c-63a1944baa3d","typeOfStateId":"state","$connId":"con_53","$id":"4db8f1b3-9713-4642-aa09-607b3e08cb3b","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"b2037e92-ce8a-417d-8ae4-8d1525880308","root":false,"$title":"Financeiro","$position":{"top":"970px","left":"886px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"1a3395c2-6489-4bed-b251-a798135e9ba7":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f5837ad3-b22a-4fce-a224-7067a74b8df2","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"24ff5448-cb90-4360-831d-81e6127ecac9","typeOfStateId":"state","$connId":"con_58","$id":"fb24d715-5f12-41ff-affe-8b0c25f030be","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"24ff5448-cb90-4360-831d-81e6127ecac9","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"1a3395c2-6489-4bed-b251-a798135e9ba7","root":false,"$title":"Problemas com conteúdo","$position":{"top":"961px","left":"1077px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"be958103-3c49-45d5-ab8d-0263edbf8636":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8d26c45f-a991-487d-83bf-9123a0d9e089","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_63","$id":"c1b852e9-6a41-4498-be75-acfee4f57f49","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"be958103-3c49-45d5-ab8d-0263edbf8636","root":false,"$title":"Falar sobre bônus","$position":{"top":"974px","left":"1265px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"0ea7603a-79b5-4fed-8e55-5206d4384084":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"5cd513f5-1475-4e43-bad6-491fae01084a","typeOfStateId":"state","$connId":"con_68","$id":"372c09e4-45f5-459e-870a-29a44af85640","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"5cd513f5-1475-4e43-bad6-491fae01084a","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"0ea7603a-79b5-4fed-8e55-5206d4384084","root":false,"$title":"Mentoria ao vivo","$position":{"top":"975px","left":"1456px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"3e4f6503-2908-439b-b812-985c98f0def2":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"5a171fa8-f8eb-4fbc-941d-34deb002710e","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"df47a841-b80c-4f23-986d-274a1fb0c78d","typeOfStateId":"state","$connId":"con_73","$id":"26da2823-3a5c-46d6-bec9-a6a19c67c9ff","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"df47a841-b80c-4f23-986d-274a1fb0c78d","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"3e4f6503-2908-439b-b812-985c98f0def2","root":false,"$title":"Cancelamento","$position":{"top":"976px","left":"1643px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"be8296c6-c07c-4af1-bb74-d9742ac1eadc":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"58e6d89c-3853-4677-a9cf-22194b7f0733","typeOfStateId":"state","$connId":"con_78","$id":"8d2c3fa1-19f0-40c3-8816-23303a81e9fa","conditions":[{"source":"context","comparison":"equals","values":["Sim, consegui!"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"14fe844e-f4ca-442d-99e2-50d33d15bfba","typeOfStateId":"state","$connId":"con_83","$id":"31e4da92-9111-490c-865d-3a084b2179fd","conditions":[{"source":"context","comparison":"equals","values":["Falar com atendente"],"variable":"validInputJs@input"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': `{{n1}}Conseguiu fazer a compra?{{n2}}`,\n    'options': [\"Sim, consegui!\", \"Falar com atendente\"],\n    'values': [\"Sim, consegui!\", \"Falar com atendente\"],\n    'description': [],\n    'itens': [\n      { name: ['Sim, consegui!', 'sim', 's', 'ss', 'yes'] },\n      { name: ['Falar com atendente', 'nao', 'no', 'n', 'nn', 'nope', 'atendente'] }\n    ]\n  }\n\n    ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs + '\\n\\n{{n1}}Conseguiu fazer a compra?{{n2}}'\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida quero comprar conseguiu exibicao","$invalid":false,"settings":{"extras":{},"category":"jogo da vida quero comprar conseguiu exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida quero comprar conseguiu selecao","$invalid":false,"settings":{"extras":{},"category":"jogo da vida quero comprar conseguiu selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida quero comprar conseguiu input inesperado","$invalid":false,"settings":{"extras":{},"category":"jogo da vida quero comprar conseguiu input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"e8e2c683-e3ea-41ed-8c19-2a0811542222","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"be8296c6-c07c-4af1-bb74-d9742ac1eadc","$title":"[JV.1.1.1] [MENU] - Conseguiu fazer a compra?","$position":{"top":"1185px","left":"318px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1ff59a27-4c31-4820-acba-db2efaefd803":{"$contentActions":[{"action":{"$id":"577025de-7cc3-4c9f-80e2-c76769025efa","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c658a427-1bd4-4706-b2fe-4d51161104a6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c658a427-1bd4-4706-b2fe-4d51161104a6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"1f92619b-4a3e-4a94-9333-25b439bbd83f","$typeOfContent":"text","type":"SendMessage","settings":{"id":"94315470-3d8a-4020-a627-6a7d7656bc2f","type":"text/plain","content":"“Fala general”! 😎\nSe você quer garantir sua vaga na Mentoria o Jogo da Vida, entra nesse link abaixo e garanta a sua vaga o quanto antes. \n\n{{n1}}Corre e aproveita os bônus e descontos que estão disponíveis só agora! Não se atrase como os procrastinadores!{{n2}}\n\n{{n1}}Pagamento à vista, Pix e Cartão:{{n2}}\nhttps://pablomarcal.com.br/whats-pdv/\n\n{{n1}}Boleto Parcelado:{{n2}}\nhttps://www.financiamento.tmbeducacao.com.br/PabloMarcal/OPAD1288","metadata":{}},"$cardContent":{"document":{"id":"94315470-3d8a-4020-a627-6a7d7656bc2f","type":"text/plain","content":"“Fala general”! 😎\nSe você quer garantir sua vaga na Mentoria o Jogo da Vida, entra nesse link abaixo e garanta a sua vaga o quanto antes. \n\n{{n1}}Corre e aproveita os bônus e descontos que estão disponíveis só agora! Não se atrase como os procrastinadores!{{n2}}\n\n{{n1}}Pagamento à vista, Pix e Cartão:{{n2}}\nhttps://pablomarcal.com.br/whats-pdv/\n\n{{n1}}Boleto Parcelado:{{n2}}\nhttps://www.financiamento.tmbeducacao.com.br/PabloMarcal/OPAD1288"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"07562b7e-6e04-4d19-8dbe-0294e33b958c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"be8296c6-c07c-4af1-bb74-d9742ac1eadc","typeOfStateId":"state","$connId":"con_88","$id":"948cc530-a4b1-4dcf-81f2-d8d9388bd8af","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"1309ff46-3980-4446-8678-8622893ddb41","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida quero comprar exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida quero comprar exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"be8296c6-c07c-4af1-bb74-d9742ac1eadc","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"1ff59a27-4c31-4820-acba-db2efaefd803","root":false,"$title":"[JV.1.1.0]","$position":{"top":"1068px","left":"318px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"58e6d89c-3853-4677-a9cf-22194b7f0733":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"20f2a16a-1d69-47d1-9a24-d087fc0b331b","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"58e6d89c-3853-4677-a9cf-22194b7f0733","root":false,"$title":"[GO TO] Finalização","$position":{"top":"1479px","left":"506px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000"}},"14fe844e-f4ca-442d-99e2-50d33d15bfba":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Vendas]","$invalid":false,"settings":{"extras":{"Team":"Vendas"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"14fe844e-f4ca-442d-99e2-50d33d15bfba","root":false,"$title":"[GO TO] Transbordo [Vendas]","$position":{"top":"1343px","left":"314px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"298d4178-2ba6-44f1-a49c-00f3beea487c":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Transbordo","$invalid":false,"settings":{"context":{"type":"text/plain","value":"ola"},"address":"{{serviceList@transbordo}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"298d4178-2ba6-44f1-a49c-00f3beea487c","root":false,"$title":"[REDIRECT TO] Transbordo","$position":{"top":"522.25px","left":"1063px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"451786bc-70d7-4a5a-9149-449908148051":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreve pra mim {{n1}}em um único texto qual a sua dúvida{{n2}}, para que eu que possa te transferir a um especialista. 👇","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreve pra mim {{n1}}em um único texto qual a sua dúvida{{n2}}, para que eu que possa te transferir a um especialista. 👇"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"4b4406b6-fc08-453d-9c4f-9b6edbe0ea1a","typeOfStateId":"state","$connId":"con_93","$id":"c137961a-cf6a-44fb-98f6-8dc0f916f3ec","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida tirar duvidas exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida tirar duvidas exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida tirar duvidas input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida tirar duvidas input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"4b4406b6-fc08-453d-9c4f-9b6edbe0ea1a","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"451786bc-70d7-4a5a-9149-449908148051","$title":"[JV.1.2.0]","$position":{"top":"1070px","left":"507px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"4b4406b6-fc08-453d-9c4f-9b6edbe0ea1a":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"20a67d93-64af-4640-a3ff-0103e6f638cd","typeOfStateId":"state","$connId":"con_98","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida tirar duvidas email exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida tirar duvidas email exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Agora, para que eu possa te transferir para um de nossos atendentes, me passa o {{n1}}seu melhor e-mail:{{n2}}\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida tirar duvidas email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida tirar duvidas email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida tirar duvidas email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida tirar duvidas email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"21616883-4e77-4809-a55c-704b4a177efc","$typeOfContent":"","type":"MergeContact","$title":"Email","$invalid":false,"settings":{"extras":{},"email":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-34536386-696f-5928-5ea7-4c06b8dfb34e","canChangeBackground":false}],"id":"4b4406b6-fc08-453d-9c4f-9b6edbe0ea1a","$title":"[JV.1.2.1] [INPUT] - Email","$position":{"top":"1189px","left":"505px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"20a67d93-64af-4640-a3ff-0103e6f638cd":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Duvidas]","$invalid":false,"settings":{"extras":{"Team":"Duvidas"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"20a67d93-64af-4640-a3ff-0103e6f638cd","root":false,"$title":"[GO TO] Transbordo [Duvidas]","$position":{"top":"1344px","left":"504px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"724997bd-f725-4ea0-a71f-1bdf120ccc6c":{"$contentActions":[{"action":{"$id":"577025de-7cc3-4c9f-80e2-c76769025efa","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c658a427-1bd4-4706-b2fe-4d51161104a6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c658a427-1bd4-4706-b2fe-4d51161104a6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"1f92619b-4a3e-4a94-9333-25b439bbd83f","$typeOfContent":"text","type":"SendMessage","settings":{"id":"94315470-3d8a-4020-a627-6a7d7656bc2f","type":"text/plain","content":"Eu tenho aqui um passo a passo pra você que esqueceu a senha ou que de alguma forma não consegue fazer o login de acesso. 👇\n\n{{n1}}1 PASSO:{{n2}}\nFaça uma busca na CAIXA DE ENTRADA E SPAM de Pesquisa do seu e-mail com a palavra XGROW;\n\n{{n1}}2 PASSO:{{n2}}\nFaça uma busca na caixa de SPAM, LIXEIRA, e PROMOÇÕES.\n\n{{n1}}3 PASSO:{{n2}}\nCaso não localize seu acesso, clique no link https://learningarea-4.xgrow.com/89d6084b-99ae-481c-8646-05c99c98b469, depois clique em ESQUECEU SUA SENHA na área de {{n1}}membros{{n2}} e digite o e-mail que utilizou no momento da compra.\nEm seguida, clique em {{n1}}Recuperar Acesso{{n2}} e confira sua caixa de e-mail novamente.","metadata":{}},"$cardContent":{"document":{"id":"94315470-3d8a-4020-a627-6a7d7656bc2f","type":"text/plain","content":"Eu tenho aqui um passo a passo pra você que esqueceu a senha ou que de alguma forma não consegue fazer o login de acesso. 👇\n\n{{n1}}1 PASSO:{{n2}}\nFaça uma busca na CAIXA DE ENTRADA E SPAM de Pesquisa do seu e-mail com a palavra XGROW;\n\n{{n1}}2 PASSO:{{n2}}\nFaça uma busca na caixa de SPAM, LIXEIRA, e PROMOÇÕES.\n\n{{n1}}3 PASSO:{{n2}}\nCaso não localize seu acesso, clique no link https://learningarea-4.xgrow.com/89d6084b-99ae-481c-8646-05c99c98b469, depois clique em ESQUECEU SUA SENHA na área de {{n1}}membros{{n2}} e digite o e-mail que utilizou no momento da compra.\nEm seguida, clique em {{n1}}Recuperar Acesso{{n2}} e confira sua caixa de e-mail novamente."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"07562b7e-6e04-4d19-8dbe-0294e33b958c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3e7b3380-bf23-4adb-94be-40b33f2e3c2b","typeOfStateId":"state","$connId":"con_103","$id":"948cc530-a4b1-4dcf-81f2-d8d9388bd8af","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"1309ff46-3980-4446-8678-8622893ddb41","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida problemas acesso exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida problemas acesso exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"3e7b3380-bf23-4adb-94be-40b33f2e3c2b","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"724997bd-f725-4ea0-a71f-1bdf120ccc6c","root":false,"$title":"[JV.1.3.0]","$position":{"top":"1075px","left":"698px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"3e7b3380-bf23-4adb-94be-40b33f2e3c2b":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"58e6d89c-3853-4677-a9cf-22194b7f0733","typeOfStateId":"state","$connId":"con_108","$id":"8d2c3fa1-19f0-40c3-8816-23303a81e9fa","conditions":[{"source":"context","comparison":"equals","values":["Não preciso"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"0970bd72-7585-45ae-8233-a51392de26f0","typeOfStateId":"state","$connId":"con_113","$id":"31e4da92-9111-490c-865d-3a084b2179fd","conditions":[{"source":"context","comparison":"equals","values":["Falar com atendente"],"variable":"validInputJs@input"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': `{{n1}}Precisa de algo mais?{{n2}}`,\n    'options': [\"Não preciso\", \"Falar com atendente\"],\n    'values': [\"Não preciso\", \"Falar com atendente\"],\n    'description': [],\n    'itens': [\n      { name: ['Não preciso', 'nao', 'no', 'n', 'nn', 'nope'] },\n      { name: ['Falar com atendente', 'atendente'] },\n    ]\n  }\n\n    ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs + '\\n\\n{{n1}}Precisa de algo mais?{{n2}}'\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida problemas com acesso algo mais exibicao","$invalid":false,"settings":{"extras":{},"category":"jogo da vida problemas com acesso algo mais exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida problemas com acesso algo mais selecao","$invalid":false,"settings":{"extras":{},"category":"jogo da vida problemas com acesso algo mais selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"jogo da vida problemas com acesso algo mais input inesperado","$invalid":false,"settings":{"extras":{},"category":"jogo da vida problemas com acesso algo mais input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"e8e2c683-e3ea-41ed-8c19-2a0811542222","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"3e7b3380-bf23-4adb-94be-40b33f2e3c2b","$title":"[JV.1.3.1] [MENU] - Algo Mais","$position":{"top":"1191px","left":"698px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0970bd72-7585-45ae-8233-a51392de26f0":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Acesso]","$invalid":false,"settings":{"extras":{"Team":"Acesso"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"0970bd72-7585-45ae-8233-a51392de26f0","root":false,"$title":"[GO TO] Transbordo [Acesso]","$position":{"top":"1345px","left":"699px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"bcb57512-054a-4964-a3a3-4c4f3a699fc4":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"52df1f11-934b-4b0f-8d69-791e90b6e9c7","typeOfStateId":"state","$connId":"con_118","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Primeiro, me passa o {{n1}}e-mail{{n2}} que você utilizou para fazer a compra:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$title":"[JV.1.6.0] [INPUT] - Email","$position":{"top":"1066px","left":"1268px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"52df1f11-934b-4b0f-8d69-791e90b6e9c7":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Sobre qual {{n1}}bônus{{n2}} você gostaria de falar?\n\n{{n1}}Exemplo: organizing{{n2}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Sobre qual {{n1}}bônus{{n2}} você gostaria de falar?\n\n{{n1}}Exemplo: organizing{{n2}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"27801bda-2a58-4648-bb8d-41355fa7c915","typeOfStateId":"state","$connId":"con_123","$id":"c137961a-cf6a-44fb-98f6-8dc0f916f3ec","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus bonus exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus bonus exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus bonus input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus bonus input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Bonus","$invalid":false,"settings":{"extras":{"bonus":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"27801bda-2a58-4648-bb8d-41355fa7c915","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"52df1f11-934b-4b0f-8d69-791e90b6e9c7","$title":"[JV.1.6.1]","$position":{"top":"1199.25px","left":"1269.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"27801bda-2a58-4648-bb8d-41355fa7c915":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreva {{n1}}em um único texto{{n2}} qual problema você gostaria de tratar para que eu possa te transferir a um especialista. 👇","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreva {{n1}}em um único texto{{n2}} qual problema você gostaria de tratar para que eu possa te transferir a um especialista. 👇"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","typeOfStateId":"state","$connId":"con_128","$id":"c137961a-cf6a-44fb-98f6-8dc0f916f3ec","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus descricao exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus descricao exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida falar sobre bonus descricao input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida falar sobre bonus descricao input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"27801bda-2a58-4648-bb8d-41355fa7c915","$title":"[JV.1.6.2]","$position":{"top":"1309.75px","left":"1270.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"96602c66-b1f6-40d3-9dd1-53e648e09f3a":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Marca Digital]","$invalid":false,"settings":{"extras":{"Team":"Marca Digital"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","root":false,"$title":"[GO TO] Transbordo [Marca Digital]","$position":{"top":"1427.25px","left":"1270px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"24ff5448-cb90-4360-831d-81e6127ecac9":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"16249e1b-1ed4-4b95-adfc-94f51ceed10d","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"24ff5448-cb90-4360-831d-81e6127ecac9","root":false,"$title":"[GO TO] Problemas com conteúdo","$position":{"top":"1072.75px","left":"1078.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"16249e1b-1ed4-4b95-adfc-94f51ceed10d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Bot Único Bloco","$invalid":false,"settings":{"context":{"type":"text/plain","value":"ola"},"address":"botunicobloco"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"16249e1b-1ed4-4b95-adfc-94f51ceed10d","root":false,"$title":"[REDIRECT TO] Bot Único Bloco","$position":{"top":"123px","left":"1246.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"a6b4b145-bdd6-4a97-a56c-63a1944baa3d":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"75fce179-2dc1-4ebe-9733-edb686afb5c8","typeOfStateId":"state","$connId":"con_133","$id":"57e7fe61-8fe6-481a-8b73-2e50c56948e3","conditions":[{"source":"context","comparison":"contains","values":["Menu Principal"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"{{goToBlock}}","typeOfStateId":"variable","$id":"1fe2061a-5a33-4da1-94a8-a54d5bbdd380","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': 'Agora selecione qual opção gostaria de falar clicando no {{n1}}menu{{n2}} abaixo:',\n    'options': [\"Nota fiscal\", \"Troca de cartão\", \"Outros assuntos\", \"↩️ Menu principal \"],\n    'values': [\"Nota fiscal\", \"Troca de cartão\", \"Outros assuntos\", \"Menu principal \"],\n    'description': [],\n    'itens': [\n      { name: ['Nota fiscal'] },\n      { name: ['Troca de cartão'] },\n      { name: ['Outros assuntos'] },\n      { name: ['Menu principal', 'menu', 'menu principal'] }\n    ]\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": false,\n      \"whatsappList\": true,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"6146ae07-d367-4b08-9daa-f2a8e356a3fc","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"640047e1-7ccc-4750-a60d-853afa6055ac","$typeOfContent":"","type":"ExecuteScript","$title":"goToBlock","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n    let input = JSON.parse(validInput).input\n\n    goToBlock = (input) => {\n        const optionList = {\n            'Nota fiscal': 'eab9fc5f-0453-4472-810d-42ba167a109b',\n            'Troca de cartão': 'dcad59b5-3839-47c5-921b-75f2388c542d',\n            'Outros assuntos': '86bbb976-1834-4df1-b857-465e9338b0a0',       \n        }\n\n        return optionList[input] || 'ERROR: NO MATCH'\n    }\n\n    return goToBlock(input);\n}","inputVariables":["validInputJs"],"outputVariable":"goToBlock","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro selecao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro input inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"5325886b-c37b-4af2-a936-3741cc8f1641","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"a6b4b145-bdd6-4a97-a56c-63a1944baa3d","$title":"[JV.1.4.0] [MENU]","$position":{"top":"1077px","left":"888px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"eab9fc5f-0453-4472-810d-42ba167a109b":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fe795c7d-82e4-443a-9cb5-0df861e548a6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"af16426e-2f5d-49fa-bdc9-8d57cd2dd319","typeOfStateId":"state","$connId":"con_138","$id":"4db8f1b3-9713-4642-aa09-607b3e08cb3b","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"af16426e-2f5d-49fa-bdc9-8d57cd2dd319","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"eab9fc5f-0453-4472-810d-42ba167a109b","root":false,"$title":"Financeiro [Nota Fiscal]","$position":{"top":"1810px","left":"671px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"75fce179-2dc1-4ebe-9733-edb686afb5c8":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"79699b3e-9792-4285-afc5-b5aa42552260","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"75fce179-2dc1-4ebe-9733-edb686afb5c8","root":false,"$title":"[GO TO] Menu [2]","$position":{"top":"1007.25px","left":"1917.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"961b617f-70a1-4418-a379-59a830c35586":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"79699b3e-9792-4285-afc5-b5aa42552260","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"961b617f-70a1-4418-a379-59a830c35586","root":false,"$title":"[GO TO] Menu [1]","$position":{"top":"505.75px","left":"573.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"af16426e-2f5d-49fa-bdc9-8d57cd2dd319":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"c9668724-a18d-456a-97e8-5ad1fd117f02","typeOfStateId":"state","$connId":"con_143","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro nf exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro nf exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Por favor,  me passa o {{n1}}e-mail{{n2}} que você utilizou para fazer a compra:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro nf input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro nf input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro nf input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro nf input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"af16426e-2f5d-49fa-bdc9-8d57cd2dd319","$title":"[JV.1.4.1] [INPUT] - Email","$position":{"top":"1920px","left":"669px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"c9668724-a18d-456a-97e8-5ad1fd117f02":{"$contentActions":[{"action":{"$id":"be3a572b-d082-4241-b2ef-2ecea0fa990e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"813a770c-eee9-4346-bf02-be9214b215f8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"813a770c-eee9-4346-bf02-be9214b215f8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"667a23c9-4df3-4af8-8a01-c3a831f7b836","$typeOfContent":"text","type":"SendMessage","settings":{"id":"f398ed79-eab0-4a32-9b4b-ef2c0e46d303","type":"text/plain","content":"💡A nota fiscal eletrônica é enviada para o seu e-mail {{n1}}30 dias{{n2}} após a data da compra.","metadata":{}},"$cardContent":{"document":{"id":"f398ed79-eab0-4a32-9b4b-ef2c0e46d303","type":"text/plain","content":"💡A nota fiscal eletrônica é enviada para o seu e-mail {{n1}}30 dias{{n2}} após a data da compra."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"803b26bc-e7d8-4bfe-82b0-645430500356","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","typeOfStateId":"state","$connId":"con_148","$id":"704d8868-31ed-4fcd-a92f-441d2f92e87a","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"89ec5b37-b018-4caa-897e-6c30af2670ec","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro nf feedback exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro nf feedback exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"c9668724-a18d-456a-97e8-5ad1fd117f02","root":false,"$title":"[JV.1.4.2]","$position":{"top":"2057px","left":"665px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"ac196a81-7619-4bda-b48b-45066f7d7720":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Financeiro]","$invalid":false,"settings":{"extras":{"Team":"Financeiro"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"ac196a81-7619-4bda-b48b-45066f7d7720","root":false,"$title":"[GO TO] Transbordo [Financeiro]","$position":{"top":"2177px","left":"868px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"82f9220a-5b05-481e-aee6-6064c43095d4":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"37b258bf-7856-4d63-975b-c93899cb412a","typeOfStateId":"state","$connId":"con_153","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro trocar cartao email exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro trocar cartao email exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Por favor,  me passa o {{n1}}e-mail{{n2}} que você utilizou para fazer a compra:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro trocar cartao email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro trocar cartao email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro trocar cartao email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro trocar cartao email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"82f9220a-5b05-481e-aee6-6064c43095d4","$title":"[JV.1.4.3] [INPUT] - Email","$position":{"top":"1923px","left":"869px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"37b258bf-7856-4d63-975b-c93899cb412a":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"803b26bc-e7d8-4bfe-82b0-645430500356","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","typeOfStateId":"state","$connId":"con_158","$id":"704d8868-31ed-4fcd-a92f-441d2f92e87a","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"89ec5b37-b018-4caa-897e-6c30af2670ec","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro trocar cartao feedback exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro trocar cartao feedback exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"37b258bf-7856-4d63-975b-c93899cb412a","root":false,"$title":"[JV.1.4.4]","$position":{"top":"2061px","left":"867px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"dcad59b5-3839-47c5-921b-75f2388c542d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fe795c7d-82e4-443a-9cb5-0df861e548a6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"82f9220a-5b05-481e-aee6-6064c43095d4","typeOfStateId":"state","$connId":"con_163","$id":"4db8f1b3-9713-4642-aa09-607b3e08cb3b","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"82f9220a-5b05-481e-aee6-6064c43095d4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"dcad59b5-3839-47c5-921b-75f2388c542d","root":false,"$title":"Financeiro [Troca de cartão]","$position":{"top":"1813px","left":"871px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"dc4a8b6a-98f8-43f6-a9cb-d83698f0d308":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"a25b096f-5fc8-4701-a339-e63ba591fdd1","typeOfStateId":"state","$connId":"con_168","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro outros assuntos email exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro outros assuntos email exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Agora me passa o {{n1}}e-mail{{n2}} que você utilizou para fazer a compra:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro outros assuntos email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro outros assuntos email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro outros assuntos email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro outros assuntos email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"dc4a8b6a-98f8-43f6-a9cb-d83698f0d308","$title":"[JV.1.4.5] [INPUT] - Email","$position":{"top":"1925px","left":"1074px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"86bbb976-1834-4df1-b857-465e9338b0a0":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fe795c7d-82e4-443a-9cb5-0df861e548a6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dc4a8b6a-98f8-43f6-a9cb-d83698f0d308","typeOfStateId":"state","$connId":"con_173","$id":"4db8f1b3-9713-4642-aa09-607b3e08cb3b","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"dc4a8b6a-98f8-43f6-a9cb-d83698f0d308","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"86bbb976-1834-4df1-b857-465e9338b0a0","root":false,"$title":"Financeiro [Outros assuntos]","$position":{"top":"1815px","left":"1076px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"a25b096f-5fc8-4701-a339-e63ba591fdd1":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Me fala {{n1}}em um único texto qual assunto você gostaria de tratar{{n2}} para que eu que possa te transferir a um especialista. 👇","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Me fala {{n1}}em um único texto qual assunto você gostaria de tratar{{n2}} para que eu que possa te transferir a um especialista. 👇"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","typeOfStateId":"state","$connId":"con_178","$id":"569a6ea2-2be2-4020-b532-35c8b63b51c4","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro outros assuntos feedback exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro outros assuntos feedback exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida financeiro outros assuntos feedback input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida financeiro outros assuntos feedback input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ac196a81-7619-4bda-b48b-45066f7d7720","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"a25b096f-5fc8-4701-a339-e63ba591fdd1","$title":"[JV.1.4.6]","$position":{"top":"2058px","left":"1074px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"07e30fd5-d53d-441e-b10e-29f6228b35a5":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"75fce179-2dc1-4ebe-9733-edb686afb5c8","typeOfStateId":"state","$connId":"con_183","$id":"57e7fe61-8fe6-481a-8b73-2e50c56948e3","conditions":[{"source":"context","comparison":"contains","values":["Menu Principal"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"{{goToBlock}}","typeOfStateId":"variable","$id":"1fe2061a-5a33-4da1-94a8-a54d5bbdd380","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': 'Selecione qual {{n1}}problema{{n2}} você está passando clicando no {{n1}}menu{{n2}} abaixo:',\n    'options': [\"Acesso à sala\", \"Transmissão\", \"Link do Zoom\", \"Outros assuntos\", \"↩️ Menu principal \"],\n    'values': [\"Acesso à sala\", \"Transmissão\", \"Link do Zoom\", \"Outros assuntos\", \"↩️ Menu principal \"],\n    'description': [],\n    'itens': [\n      { name: ['Acesso à sala'] },\n      { name: ['Transmissão'] },\n      { name: ['Link do Zoom'] },\n      { name: ['Outros assuntos'] },\n      { name: ['↩️ Menu principal '] }\n    ]\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": false,\n      \"whatsappList\": true,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"6146ae07-d367-4b08-9daa-f2a8e356a3fc","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo menu exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo menu exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"640047e1-7ccc-4750-a60d-853afa6055ac","$typeOfContent":"","type":"ExecuteScript","$title":"goToBlock","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n    let input = JSON.parse(validInput).input\n\n    goToBlock = (input) => {\n        const optionList = {\n            'Acesso à sala': '99eaba93-27ef-4dc7-aa6c-72ac6d58d4b7',\n            'Transmissão': '58d855af-e017-4131-a5e8-9c6872b3df57',\n            'Link do Zoom': 'df9cea0c-abc7-4de4-a162-69502807a7fd',\n            'Outros assuntos': 'a9376f01-ff72-4757-806c-7f1d5d8c301f',       \n        }\n\n        return optionList[input] || 'ERROR: NO MATCH'\n    }\n\n    return goToBlock(input);\n}","inputVariables":["validInputJs"],"outputVariable":"goToBlock","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo menu selecao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo menu selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo menu input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo menu input inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"5325886b-c37b-4af2-a936-3741cc8f1641","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"07e30fd5-d53d-441e-b10e-29f6228b35a5","$title":"[JV.1.7.1] [MENU]","$position":{"top":"1198px","left":"1458px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"5cd513f5-1475-4e43-bad6-491fae01084a":{"$contentActions":[{"action":{"$id":"deae71e0-5961-410b-86e5-13a5bd560407","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"68531c0c-4a54-465b-9ad4-704e0a959b5a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"68531c0c-4a54-465b-9ad4-704e0a959b5a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"d6699f88-4872-4d12-a91f-e9fc7df6dc0d","$typeOfContent":"text","type":"SendMessage","settings":{"id":"5e74cf15-ed09-4302-9ce8-ee5c28e65d74","type":"text/plain","content":"Encontrei aqui algumas opções que podem te ajudar com {{n1}}Mentoria ao vivo:{{n2}}","metadata":{}},"$cardContent":{"document":{"id":"5e74cf15-ed09-4302-9ce8-ee5c28e65d74","type":"text/plain","content":"Encontrei aqui algumas opções que podem te ajudar com {{n1}}Mentoria ao vivo:{{n2}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"5e5813ae-1345-4b21-a018-25e609755677","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"07e30fd5-d53d-441e-b10e-29f6228b35a5","typeOfStateId":"state","$connId":"con_188","$id":"c540594e-8835-4685-9515-460886508326","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"5e759c3a-c8fa-478e-a322-83b6841d6100","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"07e30fd5-d53d-441e-b10e-29f6228b35a5","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"5cd513f5-1475-4e43-bad6-491fae01084a","root":false,"$title":"[JV.1.7.0]","$position":{"top":"1070px","left":"1457px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"dbf031ac-1130-4547-a0e7-e2370fce5394":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"f9f8c821-5576-45cf-a555-8ac2a5043408","typeOfStateId":"state","$connId":"con_193","$id":"8d2c3fa1-19f0-40c3-8816-23303a81e9fa","conditions":[{"source":"context","comparison":"equals","values":["Não preciso"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"cd4d4f42-04ba-4ca0-ac82-fbd748b77ba2","typeOfStateId":"state","$connId":"con_198","$id":"31e4da92-9111-490c-865d-3a084b2179fd","conditions":[{"source":"context","comparison":"equals","values":["Falar com atendente"],"variable":"validInputJs@input"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': `{{n1}}Precisa de algo mais?{{n2}}`,\n    'options': [\"Não preciso\", \"Falar com atendente\"],\n    'values': [\"Não preciso\", \"Falar com atendente\"],\n    'description': [],\n    'itens': [\n      { name: ['Não preciso', 'nao', 'no', 'n', 'nn', 'nope'] },\n      { name: ['Falar com atendente', 'atendente'] },\n    ]\n  }\n\n    ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs + '\\n\\n{{n1}}Precisa de algo mais?{{n2}}'\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria deu certo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria deu certo exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria deu certo selecao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria deu certo selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria deu certo input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria deu certo input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"e8e2c683-e3ea-41ed-8c19-2a0811542222","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false}],"id":"dbf031ac-1130-4547-a0e7-e2370fce5394","$title":"[JV.1.7.5] [MENU] - Algo Mais","$position":{"top":"2141px","left":"1686px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"f9f8c821-5576-45cf-a555-8ac2a5043408":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"20f2a16a-1d69-47d1-9a24-d087fc0b331b","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"f9f8c821-5576-45cf-a555-8ac2a5043408","root":false,"$title":"[GO TO] Finalização [1]","$position":{"top":"2140px","left":"1873px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"793699c0-b66b-42c6-8dcc-289f1500e768":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Suporte]","$invalid":false,"settings":{"extras":{"Team":"Suporte"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"793699c0-b66b-42c6-8dcc-289f1500e768","root":false,"$title":"[GO TO] Transbordo [Suporte]","$position":{"top":"2269px","left":"1873px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"99eaba93-27ef-4dc7-aa6c-72ac6d58d4b7":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"5f594673-f753-42f8-b173-69e89e7d4ee4","typeOfStateId":"state","$connId":"con_203","$id":"372c09e4-45f5-459e-870a-29a44af85640","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"5f594673-f753-42f8-b173-69e89e7d4ee4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"99eaba93-27ef-4dc7-aa6c-72ac6d58d4b7","root":false,"$title":"Mentoria ao vivo [Acesso à sala]","$position":{"top":"1817.67px","left":"1488.33px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"58d855af-e017-4131-a5e8-9c6872b3df57":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"063260eb-80ac-4b2e-bc30-e6dcbb9d9906","typeOfStateId":"state","$connId":"con_208","$id":"372c09e4-45f5-459e-870a-29a44af85640","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"063260eb-80ac-4b2e-bc30-e6dcbb9d9906","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"58d855af-e017-4131-a5e8-9c6872b3df57","root":false,"$title":"Mentoria ao vivo [Transmissão]","$position":{"top":"1818px","left":"1681px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"df9cea0c-abc7-4de4-a162-69502807a7fd":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"6890f288-4244-4393-b1ea-2842dd87b0ac","typeOfStateId":"state","$connId":"con_213","$id":"372c09e4-45f5-459e-870a-29a44af85640","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"6890f288-4244-4393-b1ea-2842dd87b0ac","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"df9cea0c-abc7-4de4-a162-69502807a7fd","root":false,"$title":"Mentoria ao vivo [Link do Zoom]","$position":{"top":"1819px","left":"1879px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"a9376f01-ff72-4757-806c-7f1d5d8c301f":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"d29c08cc-f86f-4b37-9704-0889aa3b869c","typeOfStateId":"state","$connId":"con_218","$id":"372c09e4-45f5-459e-870a-29a44af85640","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"d29c08cc-f86f-4b37-9704-0889aa3b869c","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"a9376f01-ff72-4757-806c-7f1d5d8c301f","root":false,"$title":"Mentoria ao vivo [Outros assuntos]","$position":{"top":"1821.89px","left":"2076.11px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff","commentsIdList":[]}},"5f594673-f753-42f8-b173-69e89e7d4ee4":{"$contentActions":[{"action":{"$id":"69bf1ed3-3695-4fc6-a445-c2bf9f914ebe","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"d6f6772a-8ba7-4f3f-bd7d-4178e6de315c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"d6f6772a-8ba7-4f3f-bd7d-4178e6de315c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a47c88df-73ff-439d-9423-b812252b8c91","$typeOfContent":"text","type":"SendMessage","settings":{"id":"46fc9f36-0c2f-42f3-b089-ece10f4c5be4","type":"text/plain","content":"A sala que você está solicitando acesso deve ter atingido o limite máximo de 1000 pessoas.\n\nPor favor, saia e entre novamente na sala, atentando-se para qual sala de\nespera você está sendo\ndirecionado novamente.\n\nO número da sala precisa ser diferente do anterior.","metadata":{}},"$cardContent":{"document":{"id":"46fc9f36-0c2f-42f3-b089-ece10f4c5be4","type":"text/plain","content":"A sala que você está solicitando acesso deve ter atingido o limite máximo de 1000 pessoas.\n\nPor favor, saia e entre novamente na sala, atentando-se para qual sala de\nespera você está sendo\ndirecionado novamente.\n\nO número da sala precisa ser diferente do anterior."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"18d155d0-98b0-491c-9403-cffdef170ff2","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dbf031ac-1130-4547-a0e7-e2370fce5394","typeOfStateId":"state","$connId":"con_223","$id":"907eeacc-f5b9-46b1-8d61-df98848a421e","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"6f81585e-38ed-40db-876a-606b6778948e","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo entrar sala exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo entrar sala exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"dbf031ac-1130-4547-a0e7-e2370fce5394","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"5f594673-f753-42f8-b173-69e89e7d4ee4","root":false,"$title":"[JV.1.7.2]","$position":{"top":"1928px","left":"1488px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"063260eb-80ac-4b2e-bc30-e6dcbb9d9906":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Poderia {{n1}}descrever em um único texto{{n2}} qual problema você gostaria de tratar?","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Poderia {{n1}}descrever em um único texto{{n2}} qual problema você gostaria de tratar?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"fd4e84ed-6ae7-47e7-ba8b-d752cce8f4f1","typeOfStateId":"state","$connId":"con_228","$id":"569a6ea2-2be2-4020-b532-35c8b63b51c4","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo transmissao exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo transmissao exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo transmissao descricao input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo transmissao descricao input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fd4e84ed-6ae7-47e7-ba8b-d752cce8f4f1","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"063260eb-80ac-4b2e-bc30-e6dcbb9d9906","$title":"[JV.1.7.3]","$position":{"top":"1928px","left":"1680px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fd4e84ed-6ae7-47e7-ba8b-d752cce8f4f1":{"$contentActions":[{"action":{"$id":"d6a77881-31bf-4bcf-b70f-3cd0f83517b8","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"8bee5213-78b4-4794-b88b-564525777d3f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"8bee5213-78b4-4794-b88b-564525777d3f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"de4de82c-83f7-4cab-be9b-206a2da8c7fc","$typeOfContent":"text","type":"SendMessage","settings":{"id":"796eb80c-6c5d-4863-a88a-fef650819908","type":"text/plain","content":"Obrigado pela informação.\nEstaremos repassando a Equipe Técnica para que estes erros sejam corrigidos urgentemente.","metadata":{}},"$cardContent":{"document":{"id":"796eb80c-6c5d-4863-a88a-fef650819908","type":"text/plain","content":"Obrigado pela informação.\nEstaremos repassando a Equipe Técnica para que estes erros sejam corrigidos urgentemente."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"803b26bc-e7d8-4bfe-82b0-645430500356","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"f9f8c821-5576-45cf-a555-8ac2a5043408","typeOfStateId":"state","$connId":"con_233","$id":"704d8868-31ed-4fcd-a92f-441d2f92e87a","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"f9f8c821-5576-45cf-a555-8ac2a5043408","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"fd4e84ed-6ae7-47e7-ba8b-d752cce8f4f1","root":false,"$title":"[JV.1.7.3-1]","$position":{"top":"2038px","left":"1679px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"6890f288-4244-4393-b1ea-2842dd87b0ac":{"$contentActions":[{"action":{"$id":"0e4c91bd-eb3a-4db5-b729-b478c832671b","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"d2be6332-ab00-4636-aedd-7d41408e1ab2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"d2be6332-ab00-4636-aedd-7d41408e1ab2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"641236e1-3b76-483d-8807-c19c91048435","$typeOfContent":"text","type":"SendMessage","settings":{"id":"77f219cb-67b5-486a-ac60-e6479415957f","type":"text/plain","content":"O link para assistir a aula ao vivo no Zoom está dentro da plataforma em “Destaques”, localizado na tela inicial.","metadata":{}},"$cardContent":{"document":{"id":"77f219cb-67b5-486a-ac60-e6479415957f","type":"text/plain","content":"O link para assistir a aula ao vivo no Zoom está dentro da plataforma em “Destaques”, localizado na tela inicial."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"8a422175-b802-4210-9c39-77d2b0e3313a","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dbf031ac-1130-4547-a0e7-e2370fce5394","typeOfStateId":"state","$connId":"con_238","$id":"fad306bc-70f2-4087-8414-30a73d9c06c0","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"8e66696a-125c-4071-9c6b-0d0ca7dc5349","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria ao vivo zoom exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria ao vivo zoom exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"dbf031ac-1130-4547-a0e7-e2370fce5394","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"6890f288-4244-4393-b1ea-2842dd87b0ac","root":false,"$title":"[JV.1.7.4]","$position":{"top":"1931px","left":"1877px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"cd4d4f42-04ba-4ca0-ac82-fbd748b77ba2":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"793699c0-b66b-42c6-8dcc-289f1500e768","typeOfStateId":"state","$connId":"con_243","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria nao deu certo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria nao deu certo exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Ok! Mas antes preciso do {{n1}}seu melhor e-mail{{n2}}, por favor:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria nao deu certo email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria nao deu certo email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria nao deu certo email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria nao deu certo email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Email","$invalid":false,"settings":{"extras":{},"email":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"cd4d4f42-04ba-4ca0-ac82-fbd748b77ba2","$title":"[JV.1.7.6] [INPUT] - Email","$position":{"top":"2270px","left":"1688px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"d29c08cc-f86f-4b37-9704-0889aa3b869c":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"e82c5199-ba00-4ef1-a532-9c1328749dcf","typeOfStateId":"state","$connId":"con_248","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria outros assuntos exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria outros assuntos exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Primeiro, me passa o {{n1}}seu melhor e-mail{{n2}}, por favor:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria outros assuntos email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria outros assuntos email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria outros assuntos email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria outros assuntos email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Email","$invalid":false,"settings":{"extras":{},"email":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"d29c08cc-f86f-4b37-9704-0889aa3b869c","$title":"[JV.1.7.7] [INPUT] - Email","$position":{"top":"1932px","left":"2076px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e82c5199-ba00-4ef1-a532-9c1328749dcf":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreve pra mim {{n1}}em poucas palavras, o assunto{{n2}} que deseja tratar. 👇","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Descreve pra mim {{n1}}em poucas palavras, o assunto{{n2}} que deseja tratar. 👇"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"793699c0-b66b-42c6-8dcc-289f1500e768","typeOfStateId":"state","$connId":"con_253","$id":"569a6ea2-2be2-4020-b532-35c8b63b51c4","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria outros assuntos assunto exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria outros assuntos assunto exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida mentoria outros assuntos assunto input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida mentoria outros assuntos assunto input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"793699c0-b66b-42c6-8dcc-289f1500e768","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"e82c5199-ba00-4ef1-a532-9c1328749dcf","$title":"[JV.1.7.8]","$position":{"top":"2065px","left":"2077px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"df47a841-b80c-4f23-986d-274a1fb0c78d":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"75fce179-2dc1-4ebe-9733-edb686afb5c8","typeOfStateId":"state","$connId":"con_258","$id":"57e7fe61-8fe6-481a-8b73-2e50c56948e3","conditions":[{"source":"context","comparison":"contains","values":["Menu Principal"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"{{goToBlock}}","typeOfStateId":"variable","$id":"1fe2061a-5a33-4da1-94a8-a54d5bbdd380","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': 'O prazo de cancelamento é de até {{n1}}07 dias{{n2}} após a data da compra.\\n\\n{{n1}}Sua compra já passou de 7 dias ou ainda está dentro do prazo?{{n2}}',\n    'options': [\"Sim\", \"Não\"],\n    'values': [\"Sim\", \"Não\"],\n    'description': [],\n    'itens': [\n      { name: ['Sim', 'yes', 's', 'ss'] },\n      { name: ['Não', 'no', 'nope', 'n', 'nao'] }\n    ]\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exceção no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs + '\\n\\nO prazo de cancelamento é de até {{n1}}07 dias{{n2}} após a data da compra.\\n\\n{{n1}}Sua compra já passou de 7 dias ou ainda está dentro do prazo?{{n2}}'\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adição de opções sem numeração\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma variação lowerCase e UpperCase para cada opção do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numeração automática\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": true,\n      \"whatsappList\": false,\n      \"blipchatQuickReply\": true,\n      \"blipchatMenu\": false,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"6146ae07-d367-4b08-9daa-f2a8e356a3fc","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"640047e1-7ccc-4750-a60d-853afa6055ac","$typeOfContent":"","type":"ExecuteScript","$title":"goToBlock","$invalid":false,"settings":{"function":"run","source":"function run(validInput) {\n    let input = JSON.parse(validInput).input\n\n    goToBlock = (input) => {\n        const optionList = {\n            'Sim': '50478f92-8988-4e8c-b6d6-39b16b15879b',\n            'Não': '2ec3d8e6-43ea-461f-90e7-e449e23db1e5'       \n        }\n\n        return optionList[input] || 'ERROR: NO MATCH'\n    }\n\n    return goToBlock(input);\n}","inputVariables":["validInputJs"],"outputVariable":"goToBlock","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar selecao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar input inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"5325886b-c37b-4af2-a936-3741cc8f1641","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"df47a841-b80c-4f23-986d-274a1fb0c78d","$title":"[JV.1.5.0] [MENU]","$position":{"top":"1071px","left":"1642.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"50478f92-8988-4e8c-b6d6-39b16b15879b":{"$contentActions":[{"action":{"$id":"0db8c29a-1151-4bc5-8c29-96b8ad28b1e0","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"d51bd5b9-7b07-4604-aaca-f603ead1a098","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"d51bd5b9-7b07-4604-aaca-f603ead1a098","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"28e5dc58-9843-41e0-b90d-2b2e75b0ff8f","$typeOfContent":"text","type":"SendMessage","settings":{"id":"52267f1c-0b3c-4016-8276-68394221b4a2","type":"text/plain","content":"General, infelizmente {{n1}}após o prazo de 7 dias não é mais possível{{n2}} efetuar sua solicitação de cancelamento.","metadata":{}},"$cardContent":{"document":{"id":"52267f1c-0b3c-4016-8276-68394221b4a2","type":"text/plain","content":"General, infelizmente {{n1}}após o prazo de 7 dias não é mais possível{{n2}} efetuar sua solicitação de cancelamento."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"13303ff4-a022-482e-a0da-76f2736dd389","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"a793c681-5f5d-43bc-ab46-52074de8cef7","typeOfStateId":"state","$connId":"con_263","$id":"9c9645f8-770b-4a29-9a71-fa6cdd4c037d","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"60f21004-62dd-45af-acc1-a065a312888b","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar dentro prazo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar dentro prazo exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"a793c681-5f5d-43bc-ab46-52074de8cef7","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"50478f92-8988-4e8c-b6d6-39b16b15879b","root":false,"$title":"[JV.1.5.1]","$position":{"top":"1198.75px","left":"1642.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"a793c681-5f5d-43bc-ab46-52074de8cef7":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"20f2a16a-1d69-47d1-9a24-d087fc0b331b","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"a793c681-5f5d-43bc-ab46-52074de8cef7","root":false,"$title":"[GO TO] Finalização [2]","$position":{"top":"1137.67px","left":"1927px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"2ec3d8e6-43ea-461f-90e7-e449e23db1e5":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"1ebba9b3-15f7-4f4c-ae23-c1d245ebb6fc","typeOfStateId":"state","$connId":"con_268","$id":"4b50d6da-6cf1-44f9-bdd4-b7dcf8db0efe","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar fora prazo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar fora prazo exibicao","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"Agora me passa o {{n1}}e-mail{{n2}} que você utilizou para fazer a compra:\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando há alguma palavra reservada que o bot deverá processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma validação deverá retornar um erro para cair em exceção\n// - success => quando a validação foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input após processamento.\n// - Se type == error => o input será a descrição do erro. Ex: ERRO CEP\n// - Se type == success => o input será o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual validação o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATENÇÃO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para validação de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de validação de input vai ser  \n        //   necessário (se mais de um for selecionado, apenas o mais acima será validado)\n        // - erroMenuEspecial => altere somente se, caso a validação seja um Menu e para\n        //   este menu haja um tratamento diferente de exceção.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que será retornado pela função\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usuário digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata variáveis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Validação de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Dinâmico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Validação de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma validação foi processada, retorna o input sem validação\n            if (processedInput.input == 'INPUT SEM VALIDAÇÕES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar fora prazo email input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar fora prazo email input","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar fora prazo email input inesperado","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar fora prazo email input inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"2ec3d8e6-43ea-461f-90e7-e449e23db1e5","$title":"[JV.1.5.2] [INPUT] - Email","$position":{"top":"1312.67px","left":"1642.67px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1ebba9b3-15f7-4f4c-ae23-c1d245ebb6fc":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Certo! Antes de transferir para um de nossos atendentes, por favor, me informe abaixo o {{n1}}motivo do cancelamento{{n2}} 👇","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"Certo! Antes de transferir para um de nossos atendentes, por favor, me informe abaixo o {{n1}}motivo do cancelamento{{n2}} 👇"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"5041ec88-bc61-4ab0-b1fd-cfc149333120","typeOfStateId":"state","$connId":"con_273","$id":"c137961a-cf6a-44fb-98f6-8dc0f916f3ec","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar fora prazo motivo exibicao","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar fora prazo motivo exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"mentoria jogo da vida cancelar fora prazo motivo input","$invalid":false,"settings":{"extras":{},"category":"mentoria jogo da vida cancelar fora prazo motivo input","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"5041ec88-bc61-4ab0-b1fd-cfc149333120","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"1ebba9b3-15f7-4f4c-ae23-c1d245ebb6fc","$title":"[JV.1.5.3]","$position":{"top":"1444px","left":"1645.75px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"5041ec88-bc61-4ab0-b1fd-cfc149333120":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Cancelamento]","$invalid":false,"settings":{"extras":{"Team":"Cancelamento"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"5041ec88-bc61-4ab0-b1fd-cfc149333120","root":false,"$title":"[GO TO] Transbordo [Cancelamento]","$position":{"top":"1556.33px","left":"1647.67px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}
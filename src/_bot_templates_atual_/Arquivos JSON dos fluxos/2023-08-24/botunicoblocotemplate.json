{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"e46361e2-38f5-4e9b-9ea8-7d7795f3712f","type":"text/plain","content":"User input"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"713f5ae5-024c-48ce-a665-476b11ff8d12","$connId":"con_3","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Start","$position":{"top":"137.887px","left":"377px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d514b2b9-4f0c-421c-9f79-9fa54ff89dcc","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:487"}],"$conditionOutputs":[{"stateId":"377afe1e-202d-4223-9c32-b36c39c0b811","typeOfStateId":"state","$connId":"con_8","$id":"a2218525-d54a-4459-8b4e-2ad124f0ad8e","conditions":[{"source":"input","comparison":"notExists","values":[],"$$hashKey":"object:511"}],"$invalid":false,"$$hashKey":"object:502"},{"stateId":"377afe1e-202d-4223-9c32-b36c39c0b811","typeOfStateId":"state","$connId":"con_88","$id":"1a305d89-8f67-4c09-b258-ea3746b7f5b2","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:521"}],"$invalid":false,"$$hashKey":"object:503"}],"$enteringCustomActions":[{"$id":"6878dc8a-24c1-4f91-a9c9-4bd9f5bc6565","$typeOfContent":"","type":"ExecuteScript","$title":"exception","$invalid":false,"settings":{"function":"run","source":"function run(previousState, typeInput, previousId) {\n    try {\n        typeInput = JSON.parse(typeInput).input\n        let idFormated = previousState.split(' ');\n        idFormated = idFormated[0].replace(/\\[/g,'').replace(/\\]/g,'').replace(/\\./g,'');\n        const exception = {\n            id: `${idFormated}`,\n            input: '{{input.content}}',\n            redirectMenu: `${typeInput}`,\n            blockId: previousId\n        }\n        return exception\n    }\n    catch (e) {\n        return 'error'\n    }\n}","inputVariables":["state.previous.name","validInputJs","state.previous.id"],"outputVariable":"exception","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF961E","label":"executeScript","id":"blip-tag-10da33cd-3fdf-48d2-f8c7-275ffd02103c","canChangeBackground":false}],"id":"fallback","$title":"Exceptions","$position":{"top":"122px","left":"877px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f961d4b1-ed0e-4055-8a4c-65a8c884cedb","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8","typeOfStateId":"state","$connId":"con_18","$id":"4c701ca2-f14b-44c6-a2e2-8a66dc700445","conditions":[{"source":"context","comparison":"equals","values":["true"],"variable":"returnException"}],"$invalid":false},{"stateId":"05f0f06c-3706-4651-927e-eeea9e741074","typeOfStateId":"state","$connId":"con_23","$id":"547fe83f-0afb-43c2-916c-a7a82bca8415","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"fdc1d3a5-3c54-4f20-936f-e3b3dd4d1ddd","$typeOfContent":"","type":"SetVariable","$title":"service","$invalid":false,"settings":{"variable":"service","value":"botunicobloco"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"welcome","$title":"[REQUERIMENTS]","$position":{"top":"237px","left":"377px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#000000","textColor":"#ffffff"}},"c9d0c48a-7d6b-468b-9458-41577eea43f7":{"$contentActions":[{"action":{"$id":"40ccc244-df19-4bf9-a7d1-e4f5f4c46722","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"19eb619d-6f11-4923-b326-72ab8352b8ba","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"b5a6f654-d2d1-4e03-b68a-1f821b914c28","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{contentJs}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"961b617f-70a1-4418-a379-59a830c35586","typeOfStateId":"state","$connId":"con_28","$id":"57e7fe61-8fe6-481a-8b73-2e50c56948e3","conditions":[{"source":"context","comparison":"contains","values":["Menu Principal"],"variable":"validInputJs@input"}],"$invalid":false},{"stateId":"{{selectionObj@goToBlock}}","typeOfStateId":"variable","$id":"1fe2061a-5a33-4da1-94a8-a54d5bbdd380","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0af07bf9-f694-4636-a08b-fc1d339ed605","$typeOfContent":"","type":"ExecuteScript","$title":"inputOptionJs","$invalid":false,"settings":{"function":"run","source":"function run(hideInputText, sentenceOtherMistakesJs) {\n\n  let properties = {\n    'text': 'Selecione qual {{n1}}problema{{n2}} voc√™ est√° passando clicando no {{n1}}menu{{n2}} abaixo:',\n    'options': [\"√Åudio ruim\", \"V√≠deo ruim\", \"Aula em falta\", \"PDF n√£o encontrado\", \"N√£o salva as aulas\",\n      \"Link n√£o funciona\", \"Outros assuntos\", \"‚Ü©Ô∏è Menu principal\"],\n    'values': [\"√Åudio ruim\", \"V√≠deo ruim\", \"Aula em falta\", \"PDF n√£o encontrado\", \"N√£o salva as aulas\",\n      \"Link n√£o funciona\", \"Outros assuntos\", \"Menu principal\"],\n    'description': [],\n    'itens': [\n      { name: ['√Åudio ruim'] },\n      { name: ['V√≠deo ruim'] },\n      { name: ['Aula em falta'] },\n      { name: ['PDF n√£o encontrado'] },\n      { name: ['N√£o salva as aulas'] },\n      { name: ['Link n√£o funciona'] },\n      { name: ['Outros assuntos'] },\n      { name: ['Menu principal', 'menu', 'menu principal'] }\n    ]\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Exibe mensagem de exce√ß√£o no MENU\n  if (hideInputText == 'true' || hideInputText == true) {\n    properties.text = sentenceOtherMistakesJs\n  } \n  ////////////////////////////////////////////////////////////////////////////////\n\n  properties.itens = addItensNumeracao(properties.itens);\n\n  // Adi√ß√£o de op√ß√µes sem numera√ß√£o\n  let opcoesExtras = []\n\n  opcoesExtras = addItens(opcoesExtras);\n\n  for (let i = 0; i < opcoesExtras.length; i++) {\n    properties.itens.push(opcoesExtras[i]);\n  }\n\n  return JSON.stringify(properties);\n}\n\nfunction addItens(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n  }\n  return newItens;\n}\n\nfunction addItensNumeracao(itens) {\n  let newItens = [];\n  let newNames;\n  let name;\n  let match;\n  for (let i = 0; i < itens.length; i++) {\n    name = itens[i].name;\n    newNames = []\n    for (let y = 0; y < itens[i].name.length; y++) {\n      match = name[y];\n      newNames.push(match);\n      // Adiciona uma varia√ß√£o lowerCase e UpperCase para cada op√ß√£o do itens\n      newNames.push(match.toLowerCase());\n      newNames.push(match.toUpperCase());\n      newItens[i] = { name: newNames };\n    }\n    newNames.push(`${i + 1}`); // Acrescenta numera√ß√£o autom√°tica\n  }\n  return newItens;\n} \n","inputVariables":["hideInputText","sentenceOtherMistakesJs"],"outputVariable":"inputOptionJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"181a73ce-4d24-4c10-90f2-d2e8c352791e","$typeOfContent":"","type":"ExecuteScript","$title":"objMenu","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, menu) => {\n  let convertPlatform = platform.toLowerCase();\n  menu = JSON.parse(menu);\n  platform = platform.toLowerCase();\n\n  if (platform == 'instagram' || platform == 'messenger') {\n    const objectType = {\n      'type': `text/plain`\n    }\n    return objectType\n  };\n\n  let default_msg = {\n    \"text\": menu.text,\n    \"header\": 'Menu',\n    \"body\": menu.text,\n    \"footer\": '',\n    \"button\": 'Menu',\n    \"title\": 'Menu',\n    \"namespaceTemplate\": '',\n    \"nameTemplate\": '',\n    \"options\": menu.options,\n    \"values\": menu.values,\n    \"submenu\": [],\n    \"description\": menu.description,\n    \"menuScope\": {\n      \"whatsappButton\": false,\n      \"whatsappList\": true,\n      \"blipchatQuickReply\": false,\n      \"blipchatMenu\": true,\n      \"defaultText\": false,\n      \"platform\": convertPlatform\n    },\n  };\n\n  var newMenu = getMenuForPlatform(default_msg);\n\n  return newMenu;\n};","inputVariables":["platform","inputOptionJs"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"18db78c0-fa11-4575-866e-6f13d900f271","$typeOfContent":"","type":"ExecuteScript","$title":"contentJs","$invalid":false,"settings":{"function":"run","source":"function run(menu, platform, objMenu) {\n  objMenu = JSON.parse(objMenu);\n  platform = platform.toLowerCase();\n\n  switch (platform) {\n    case 'instagram':\n      return geraMenuNumerico(menu);\n\n    case 'messenger':\n      return geraMenuNumerico(menu);\n\n    default:\n      return objMenu.content;\n  }\n}\n\nfunction geraMenuNumerico(menu) {\n  menu = JSON.parse(menu);\n\n  let listaOptions = '\\n\\n';\n  for (let i = 0; i < menu.options.length; i++) {\n    listaOptions = listaOptions + (i + 1) + '. ' + menu.options[i] + '\\n';\n  }\n\n  return menu.text + listaOptions;\n}","inputVariables":["inputOptionJs","platform","objMenu"],"outputVariable":"contentJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"6146ae07-d367-4b08-9daa-f2a8e356a3fc","$typeOfContent":"","type":"TrackEvent","$title":"problemas com conteudo menu exibicao","$invalid":false,"settings":{"extras":{},"category":"problemas com conteudo menu exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando h√° alguma palavra reservada que o bot dever√° processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma valida√ß√£o dever√° retornar um erro para cair em exce√ß√£o\n// - success => quando a valida√ß√£o foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input ap√≥s processamento.\n// - Se type == error => o input ser√° a descri√ß√£o do erro. Ex: ERRO CEP\n// - Se type == success => o input ser√° o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual valida√ß√£o o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATEN√á√ÉO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para valida√ß√£o de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de valida√ß√£o de input vai ser  \n        //   necess√°rio (se mais de um for selecionado, apenas o mais acima ser√° validado)\n        // - erroMenuEspecial => altere somente se, caso a valida√ß√£o seja um Menu e para\n        //   este menu haja um tratamento diferente de exce√ß√£o.\n        // =================================================================================\n        const validacaoMenu = true;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: false,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que ser√° retornado pela fun√ß√£o\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usu√°rio digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata vari√°veis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Valida√ß√£o de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Din√¢mico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Valida√ß√£o de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma valida√ß√£o foi processada, retorna o input sem valida√ß√£o\n            if (processedInput.input == 'INPUT SEM VALIDA√á√ïES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"640047e1-7ccc-4750-a60d-853afa6055ac","$typeOfContent":"","type":"ExecuteScript","$title":"selectionObj","$invalid":false,"settings":{"function":"run","source":"const run = (validInput) => {\n  let input = JSON.parse(validInput).input;\n\n  const defaultTextoDescricao = `Ok! Antes de transferir para um de nossos atendentes, por favor, {{n1}}me informe a aula em que aparece o problema como no exemplo abaixo{{n2}} üëá` \n  const descricaoTextoExemple = \"{{n1}}Assim:{{n2}} aula 4 negocia√ß√£o\"\n\n  trackingsAndTransbordo = (input) => {\n    const optionList = {\n      \"√Åudio ruim\": {\n        textoEmail: \"Sinto muito por isso... üòï\\nPoderia me passar o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo audio ruim exibicao\",\n        emailInput: \"problemas com conteudo audio ruim email input\",\n        emailInesperado: \"problemas com conteudo audio ruim email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo audio ruim aula exibicao\",\n        descricaoInput: \"problemas com conteudo audio ruim aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"f95c78ee-3f19-4994-a7fa-94d882f0a166\"\n      },\n      \"V√≠deo ruim\": {\n        textoEmail: \"Ah que chato isso... üòï\\nPoderia me passar o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo video ruim exibicao\",\n        emailInput: \"problemas com conteudo video ruim email input\",\n        emailInesperado: \"problemas com conteudo video ruim email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo video ruim aula exibicao\",\n        descricaoInput: \"problemas com conteudo video ruim aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"a07dfef2-c0a2-457d-98cb-29db278066c6\"\n      },\n      \"Aula em falta\": {\n        textoEmail: \"Poxa... üòï\\nMe passa o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo aula em falta exibicao\",\n        emailInput: \"problemas com conteudo aula em falta email input\",\n        emailInesperado: \"problemas com conteudo aula em falta email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo aula em falta aula exibicao\",\n        descricaoInput: \"problemas com conteudo aula em falta aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"8420c2db-e4c5-481b-983c-257ba939db2c\"\n      },\n      \"PDF n√£o encontrado\": {\n        textoEmail: \"Ah que chato isso... üòï\\nPoderia me passar o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo pdf aula exibicao\",\n        emailInput: \"problemas com conteudo pdf aula email input\",\n        emailInesperado: \"problemas com conteudo pdf aula email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo pdf aula aula exibicao\",\n        descricaoInput: \"problemas com conteudo pdf aula aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"b2037e92-ce8a-417d-8ae4-8d1525880308\"\n      },\n      \"N√£o salva as aulas\": {\n        textoEmail: \"Sinto muito por isso... üòï\\nPoderia me passar o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo progresso exibicao\",\n        emailInput: \"problemas com conteudo progresso email input\",\n        emailInesperado: \"problemas com conteudo progresso email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo progresso aula exibicao\",\n        descricaoInput: \"problemas com conteudo progresso aula input\",\n        transbordo: \"XGrow\",\n        goToBlock: \"1a3395c2-6489-4bed-b251-a798135e9ba7\"\n      },\n      \"Link n√£o funciona\": {\n        textoEmail: \"Poxa... üòï\\nMe passa o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo link exibicao\",\n        emailInput: \"problemas com conteudo link email input\",\n        emailInesperado: \"problemas com conteudo link email input inesperado\",\n        textoDescricao: defaultTextoDescricao,\n        descricaoTextoExemple : descricaoTextoExemple,\n        descricaoExibicao: \"problemas com conteudo link aula exibicao\",\n        descricaoInput: \"problemas com conteudo link aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"be958103-3c49-45d5-ab8d-0263edbf8636\"\n      },\n      \"Outros assuntos\": {\n        textoEmail: \"Ah que chato isso... üòï\\nPoderia me passar o {{n1}}e-mail{{n2}} que voc√™ utilizou para fazer a compra?\",\n        emailExibicao: \"problemas com conteudo outro assunto exibicao\",\n        emailInput: \"problemas com conteudo outro assunto email input\",\n        emailInesperado: \"problemas com conteudo outro assunto email input inesperado\",\n        textoDescricao: \"Ok! Antes de transferir para um de nossos atendentes, por favor, me informe em poucas palavras sobre {{n1}}qual assunto{{n2}} voc√™ gostaria de falar üëá\",\n        descricaoTextoExemple : \"\",\n        descricaoExibicao: \"problemas com conteudo outro assunto aula exibicao\",\n        descricaoInput: \"problemas com conteudo outro assunto aula input\",\n        transbordo: \"Marca Digital\",\n        goToBlock: \"0ea7603a-79b5-4fed-8e55-5206d4384084\"\n      },\n    };\n\n    return optionList[input] || \"ERROR: NO MATCH\";\n  };\n\n  return trackingsAndTransbordo(input);\n}","inputVariables":["validInputJs"],"outputVariable":"selectionObj","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca0780fb-4590-4991-b281-fda1d115b2b6","$typeOfContent":"","type":"TrackEvent","$title":"problemas com conteudo menu selecao","$invalid":false,"settings":{"extras":{},"category":"problemas com conteudo menu selecao","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"},{"source":"input","comparison":"exists","values":[]}]},{"$id":"66155932-cd0b-4c34-9628-39d25d459551","$typeOfContent":"","type":"TrackEvent","$title":"problemas com conteudo menu input inesperado","$invalid":false,"settings":{"extras":{},"category":"problemas com conteudo menu input inesperado","action":"{{input.content}}"},"conditions":[{"source":"input","comparison":"exists","values":[]},{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["error","reserved"]}]},{"$id":"5325886b-c37b-4af2-a936-3741cc8f1641","$typeOfContent":"","type":"SetVariable","$title":"hideInputText [false]","$invalid":false,"settings":{"variable":"hideInputText","value":"false"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false},{"background":"#FF6F1E","label":"executeScript","id":"blip-tag-df3af129-53bb-ec72-481d-85ae1c73cfe0","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"c9d0c48a-7d6b-468b-9458-41577eea43f7","$title":"[PC.1.0.1] [MENU] - Problemas","$position":{"top":"496px","left":"378px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"377afe1e-202d-4223-9c32-b36c39c0b811":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f4a76ec3-f892-4cad-ad43-60297c09eb7b","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"3fb7ef00-299c-4276-8405-acb5cf3a78a4","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Exce√ß√µes","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{exception}}"},"address":"{{serviceList@excecao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"377afe1e-202d-4223-9c32-b36c39c0b811","$title":"[REDIRECT TO] Exce√ß√µes","$position":{"top":"121px","left":"1061px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"20f2a16a-1d69-47d1-9a24-d087fc0b331b":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"3ed14941-bd24-4013-a18d-1f4c6e4ace91","$typeOfContent":"","type":"SetVariable","$title":"clearException","$invalid":false,"settings":{"variable":"exception"},"conditions":[]}],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Finalizar","$invalid":false,"settings":{"context":{"type":"text/plain","value":"ola"},"address":"{{serviceList@finalizacao}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false},{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"20f2a16a-1d69-47d1-9a24-d087fc0b331b","root":false,"$title":"[REDIRECT TO] Finalizar","$position":{"top":"253.5px","left":"1062.25px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"79699b3e-9792-4285-afc5-b5aa42552260":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"6d96947e-81eb-4195-9a03-8a7f8906e5eb","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"7455ae48-cff1-4bbb-b8f7-34f0ecea3ba1","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Menu Principal","$invalid":false,"settings":{"context":{"type":"text/plain","value":"Menu"},"address":"{{serviceList@boas_vindas}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"79699b3e-9792-4285-afc5-b5aa42552260","root":false,"$title":"[REDIRECT TO] Menu Principal","$position":{"top":"387px","left":"1061px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000"}},"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"aebf3f0a-56ac-4466-b042-70cabc54dbf4","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:804"}],"$conditionOutputs":[{"stateId":"{{exception@blockId}}","typeOfStateId":"variable","$id":"b1b890fc-ecec-42df-b40a-22fea7b29adb","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:813"}],"$invalid":false,"$$hashKey":"object:806"}],"$enteringCustomActions":[{"$id":"ad440f48-87c3-4fa8-be77-43d1b0e5b835","$typeOfContent":"","type":"SetVariable","$title":"returnException","$invalid":false,"settings":{"variable":"returnException","value":"false"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"Set variable","id":"blip-tag-024ed08b-c8b4-9452-aa33-a09569f77a2d","canChangeBackground":false}],"id":"959b012a-ccc6-442f-b9a0-28ea0ae1b8d8","root":false,"$title":"Retorno Exce√ß√£o","$position":{"top":"137.75px","left":"583.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#eb9694","textColor":"#000000","commentsIdList":[]}},"05f0f06c-3706-4651-927e-eeea9e741074":{"$contentActions":[{"action":{"$id":"a1de2037-e117-49f8-9d16-2a335da50688","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c95cfa23-6308-4af5-9e93-69b7a54cef60","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c95cfa23-6308-4af5-9e93-69b7a54cef60","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"37cc62f7-1eab-4e5b-b911-2c6a2264d7a5","$typeOfContent":"text","type":"SendMessage","settings":{"id":"a08add94-fef9-4059-9898-c3c0662aba0c","type":"text/plain","content":"Encontrei aqui algumas op√ß√µes que podem te ajudar a resolver {{n1}}Problemas com conte√∫do:{{n2}}","metadata":{}},"$cardContent":{"document":{"id":"a08add94-fef9-4059-9898-c3c0662aba0c","type":"text/plain","content":"Encontrei aqui algumas op√ß√µes que podem te ajudar a resolver {{n1}}Problemas com conte√∫do:{{n2}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"485af9e8-effc-4a98-b36c-e26769c42192","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"c9d0c48a-7d6b-468b-9458-41577eea43f7","typeOfStateId":"state","$connId":"con_33","$id":"48ae6809-3e0b-46ac-a0c1-44724cd5a80d","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0c7a7d7a-e245-4d09-9525-b928f1aaf2cc","$typeOfContent":"","type":"TrackEvent","$title":"problemas com conteudo exibicao","$invalid":false,"settings":{"extras":{},"category":"problemas com conteudo exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-c54b55c8-285f-be44-167f-ddb9370efbe9","canChangeBackground":false}],"id":"05f0f06c-3706-4651-927e-eeea9e741074","root":false,"$title":"[PC.1.0.0]","$position":{"top":"366px","left":"378px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"f95c78ee-3f19-4994-a7fa-94d882f0a166":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"e1b19d88-6e42-46c9-97d5-1aa799b06b61","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_38","$id":"7c346197-82b3-4401-bee1-c4a7c9938816","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"f95c78ee-3f19-4994-a7fa-94d882f0a166","root":false,"$title":"√Åudio ruim","$position":{"top":"965px","left":"318px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"a07dfef2-c0a2-457d-98cb-29db278066c6":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"45e19b7a-6ec6-4606-8b51-4dfe811621e4","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_43","$id":"9aaace78-b79f-4fd1-9a43-a83953561996","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"a07dfef2-c0a2-457d-98cb-29db278066c6","root":false,"$title":"V√≠deo ruim","$position":{"top":"968px","left":"507px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"8420c2db-e4c5-481b-983c-257ba939db2c":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"08fbfd6d-f577-4ea7-a221-803b52a5bd4c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_48","$id":"195df552-6e13-4331-bf77-7fb1316ec7b8","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"8420c2db-e4c5-481b-983c-257ba939db2c","root":false,"$title":"Aula em falta","$position":{"top":"970px","left":"697.887px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"b2037e92-ce8a-417d-8ae4-8d1525880308":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fe795c7d-82e4-443a-9cb5-0df861e548a6","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_53","$id":"5834c3e5-9190-4abd-ac4b-dfe7a9c40070","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"b2037e92-ce8a-417d-8ae4-8d1525880308","root":false,"$title":"PDF n√£o encontrado","$position":{"top":"970px","left":"886px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"1a3395c2-6489-4bed-b251-a798135e9ba7":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f5837ad3-b22a-4fce-a224-7067a74b8df2","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_58","$id":"e67d9d34-f057-438a-8293-4260acf12bfa","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"1a3395c2-6489-4bed-b251-a798135e9ba7","root":false,"$title":"N√£o salva as aulas","$position":{"top":"969px","left":"1074px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"be958103-3c49-45d5-ab8d-0263edbf8636":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8d26c45f-a991-487d-83bf-9123a0d9e089","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_63","$id":"c1b852e9-6a41-4498-be75-acfee4f57f49","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"be958103-3c49-45d5-ab8d-0263edbf8636","root":false,"$title":"Link n√£o funciona","$position":{"top":"974px","left":"1265px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"0ea7603a-79b5-4fed-8e55-5206d4384084":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fde38e65-98c8-470c-b1b0-db68edfb0abe","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","typeOfStateId":"state","$connId":"con_68","$id":"3864af2a-1046-4a18-86e2-77f046aa44c7","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"0ea7603a-79b5-4fed-8e55-5206d4384084","root":false,"$title":"Outros assuntos","$position":{"top":"975px","left":"1456px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#455a64","textColor":"#ffffff"}},"298d4178-2ba6-44f1-a49c-00f3beea487c":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"581d2ca6-5ab2-4e38-8726-d22b30bcf23c","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8735939c-ee24-45e9-ba72-24fe28e39c0d","$typeOfContent":"","type":"Redirect","$title":"[GO TO] Transbordo","$invalid":false,"settings":{"context":{"type":"text/plain","value":"ola"},"address":"{{serviceList@transbordo}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#0A6045","label":"REDIRECT TO","id":"blip-tag-82243cbc-e3cc-2e9d-4799-05fe802b8731","canChangeBackground":false}],"id":"298d4178-2ba6-44f1-a49c-00f3beea487c","root":false,"$title":"[REDIRECT TO] Transbordo","$position":{"top":"522.25px","left":"1063px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#c8e6c9","textColor":"#000000","commentsIdList":[]}},"bcb57512-054a-4964-a3a3-4c4f3a699fc4":{"$contentActions":[{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{inputText}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"27801bda-2a58-4648-bb8d-41355fa7c915","typeOfStateId":"state","$connId":"con_73","$id":"a033de3b-c626-4cd3-8ade-d90b74d20c4a","conditions":[{"source":"context","comparison":"equals","values":["success"],"variable":"validInputJs@type"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"selectionObj - email exibicao","$invalid":false,"settings":{"extras":{},"category":"{{selectionObj@emailExibicao}}","action":"Exibicao"},"conditions":[]},{"$id":"93a648f3-3678-416d-ba61-3a39fe322fb7","$typeOfContent":"","type":"ExecuteScript","$title":"InputText","$invalid":false,"settings":{"function":"run","source":"function run(hide) {\n\n    let inputText = \"{{selectionObj@textoEmail}}\"\n\n    if (hide == true || hide == \"true\") {\n        return \"\";\n    } else  {\n        return inputText\n    }\n}","inputVariables":["hideInputText"],"outputVariable":"inputText","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"4c3fd580-c601-45cc-8eae-e805e71a605f","$typeOfContent":"","type":"ExecuteScript","$title":"validInputJs","$invalid":false,"settings":{"function":"run","source":"// ============================================================================\n//      TYPE\n// ============================================================================\n// - reserved => quando h√° alguma palavra reservada que o bot dever√° processar, \n// como SAIR E MENU por exemplo\n// - error => quando alguma valida√ß√£o dever√° retornar um erro para cair em exce√ß√£o\n// - success => quando a valida√ß√£o foi bem sucedida.\n// ============================================================================\n//      INPUT\n// ============================================================================\n// Retorna o input ap√≥s processamento.\n// - Se type == error => o input ser√° a descri√ß√£o do erro. Ex: ERRO CEP\n// - Se type == success => o input ser√° o input original processado.\n// ============================================================================\n//      VALIDATION\n// ============================================================================\n// Retorna em qual valida√ß√£o o input foi processado. Ex: cep\n// ============================================================================\n{{resource.FunctionProcessInput}}\n\nfunction run(input, inputType, platform, menu) {\n    try {\n\n        // =================================================================================\n        //             ATEN√á√ÉO: MANIPULAR SOMENTE AS DUAS CONSTANTES A SEGUIR\n        // =================================================================================\n        // - validacaoMenu => true para valida√ß√£o de Menu, false para Input\n        // - validacoesInput => insira aqui que tipo de valida√ß√£o de input vai ser  \n        //   necess√°rio (se mais de um for selecionado, apenas o mais acima ser√° validado)\n        // - erroMenuEspecial => altere somente se, caso a valida√ß√£o seja um Menu e para\n        //   este menu haja um tratamento diferente de exce√ß√£o.\n        // =================================================================================\n        const validacaoMenu = false;\n        const erroMenuEspecial = 'ERRO DINAMICO';\n        const validacoesInput = {\n            data: false,\n            email: true,\n            cep: false,\n            img: false,\n            imgTxt: false,\n            nome: false\n        };\n        // ========================================================================\n\n        // Inicia o objeto que ser√° retornado pela fun√ß√£o\n        let processedInput = {\n            'type': null,\n            'input': null,\n            'validation': 'none'\n        }\n\n        // Verifica se o usu√°rio digitou SAIR ou MENU\n        // if (input == 'sair' || input == 'SAIR' || input == 'Sair') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'SAIR'\n        //     return JSON.stringify(processedInput)\n        // } else if (input == 'menu' || input == 'MENU' || input == 'Menu') {\n        //     processedInput.type = 'reserved'\n        //     processedInput.input = 'MENU'\n        //     return JSON.stringify(processedInput)\n        // }\n\n        // Formata vari√°veis\n        menu = JSON.parse(menu);\n        platform = platform.toUpperCase()\n\n        if (validacaoMenu) {\n            // Valida√ß√£o de MENU\n            processedInput = validaMenu(input, menu, platform)\n\n            // Verifica se precisa mudar a mensagem de erro do Menu Din√¢mico para o Especial\n            if ((processedInput.input == 'ERRO DINAMICO' || processedInput.input == 'ERRO NUMERICO') && erroMenuEspecial != '') {\n                processedInput.input = erroMenuEspecial; \n            }\n            return JSON.stringify(processedInput);\n\n        } else {\n            // Valida√ß√£o de INPUT\n            const val = Object.entries(validacoesInput);\n            processedInput = validaInput(val, input, inputType)\n\n            // Se nenhuma valida√ß√£o foi processada, retorna o input sem valida√ß√£o\n            if (processedInput.input == 'INPUT SEM VALIDA√á√ïES') {\n                return JSON.stringify({type: 'success', input: input, validation: 'none'});\n\n            } else {\n                return JSON.stringify(processedInput);\n            }\n        }\n\n    } catch (e) {\n        return {type: 'error', input: 'ERRO INESPERADO', validation: 'none'}\n    }\n}","inputVariables":["input.content","input.type","platform","inputOptionJs"],"outputVariable":"validInputJs","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"7834d7d6-0901-47a7-8f76-9e857ae74938","$typeOfContent":"","type":"TrackEvent","$title":"selectionObj - email input","$invalid":false,"settings":{"extras":{},"category":"{{selectionObj@emailInput}}","action":"{{validInputJs@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"cfe5c70b-82e5-495a-8660-9a3a92d3890f","$typeOfContent":"","type":"TrackEvent","$title":"selectionObj - email Inesperado","$invalid":false,"settings":{"extras":{},"category":"{{selectionObj@emailInesperado}}","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"notEquals","variable":"validInputJs@type","values":["success"]},{"source":"input","comparison":"exists","values":[]}]},{"$id":"9bed6ee2-713f-4a07-8526-4498e2c417b1","$typeOfContent":"","type":"MergeContact","$title":"Extras: Email Compra","$invalid":false,"settings":{"extras":{"email_compra":"{{validInputJs@input}}"}},"conditions":[{"source":"context","comparison":"equals","variable":"validInputJs@type","values":["success"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FF961E","label":"ExecuteScript","id":"blip-tag-4cffa4e2-3244-409f-90a7-9fff4b556eb1","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"bcb57512-054a-4964-a3a3-4c4f3a699fc4","$title":"[PC.1.1.0] Email","$position":{"top":"1071px","left":"887px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"27801bda-2a58-4648-bb8d-41355fa7c915":{"$contentActions":[{"action":{"$id":"ab11f36c-9b7f-4198-aefc-d229f78f84db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e4ec0384-3140-4c60-8b88-c61d68c5265d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3ca20bf5-40b6-43ab-bdf0-1d594d0cbcb8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{selectionObj@textoDescricao}}\n\n{{selectionObj@descricaoTextoExemple}}","metadata":{}},"$cardContent":{"document":{"id":"2c1de04e-6b5b-453d-b775-c507cf8118f6","type":"text/plain","content":"{{selectionObj@textoDescricao}}\n\n{{selectionObj@descricaoTextoExemple}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"be996d59-606a-485c-bd73-cb31970b6f66","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"0:1"},"$invalid":false}],"$conditionOutputs":[{"stateId":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","typeOfStateId":"state","$connId":"con_78","$id":"c137961a-cf6a-44fb-98f6-8dc0f916f3ec","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"ee7f20f2-6581-44e1-99b3-dbb09af51957","$typeOfContent":"","type":"TrackEvent","$title":"selectionObj - descricao exibicao","$invalid":false,"settings":{"extras":{},"category":"{{selectionObj@descricaoExibicao}}","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[{"$id":"2978b786-6870-4b2d-84d9-4660edc9d530","$typeOfContent":"","type":"TrackEvent","$title":"selectionObj - descricao input","$invalid":false,"settings":{"extras":{},"category":"{{selectionObj@descricaoInput}}","action":"{{input.content}}"},"conditions":[]},{"$id":"5d23d0b9-c0ae-47e4-b80c-328f87a531ca","$typeOfContent":"","type":"MergeContact","$title":"Descricao","$invalid":false,"settings":{"extras":{"descricao":"{{input.content}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#61D36F","label":"Event tracking","id":"blip-tag-ed2ab0b6-d476-fa9f-0ed2-e09dd9fec033","canChangeBackground":false},{"background":"#FFEC03","label":"userInput","id":"blip-tag-59565120-de68-cdcc-653c-94c14e2b5e9e","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"27801bda-2a58-4648-bb8d-41355fa7c915","$title":"[PC.1.1.1]","$position":{"top":"1187px","left":"888px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"96602c66-b1f6-40d3-9dd1-53e648e09f3a":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d61306cb-702e-4d2a-9b6d-1cc5f0de41c8","$typeOfContent":"","type":"MergeContact","$title":"Team [Marca Digital ou XGrow]","$invalid":false,"settings":{"extras":{"Team":"{{selectionObj@transbordo}}"}},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"298d4178-2ba6-44f1-a49c-00f3beea487c","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false},{"background":"#7762E3","label":"Set Contact","id":"blip-tag-a531197d-5d28-c5d7-2b51-dff025e28b80","canChangeBackground":false}],"id":"96602c66-b1f6-40d3-9dd1-53e648e09f3a","root":false,"$title":"[GO TO] Transbordo [Marca Digital ou XGrow]","$position":{"top":"1306px","left":"887px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}},"961b617f-70a1-4418-a379-59a830c35586":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c6b4cf3-f991-413c-a869-33384a11453c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"79699b3e-9792-4285-afc5-b5aa42552260","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#3A4A65","label":"GO TO","id":"blip-tag-dd5a4db1-c69f-3b4b-9f84-7f5425d92180","canChangeBackground":false}],"id":"961b617f-70a1-4418-a379-59a830c35586","root":false,"$title":"[GO TO] Menu [1]","$position":{"top":"505.75px","left":"573.5px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"addonsSettings":{"backgroundColor":"#fff9c4","textColor":"#000000","commentsIdList":[]}}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}
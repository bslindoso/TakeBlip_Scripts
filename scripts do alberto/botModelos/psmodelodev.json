{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"be3d3246-157a-4b28-aa7d-90af07455e51","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"d6c106f7-8bbd-411d-b155-7921b83cfe42","$connId":"con_3","$id":"3e0403e5-63c5-4ea6-b6a1-6e3856b80425","conditions":[{"source":"context","comparison":"equals","values":["saudacao"],"variable":"objExcecao@origin"}],"$invalid":false},{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"62fe768c-c34f-4f31-95b9-5b5171b86434","$connId":"con_8","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Início","$position":{"top":"79px","left":"1397px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"315198f0-d588-4e7f-b1a7-7a9e1944f26a","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"e9bf25fd-8831-49fc-b59c-bee9160e4a2b","$connId":"con_13","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$title":"Exceções","$position":{"top":"224px","left":"185px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"b7c6b9e6-c0be-4eb0-b8ea-fa82b4761c06","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"9f7cd6fc-bb7d-4bf0-aad0-919bb126f51e","$typeOfContent":"","type":"TrackEvent","$title":"exibicao","$invalid":false,"settings":{"extras":{},"category":"exibicao","action":"Exibicao"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#167491","label":"Event","id":"blip-tag-7fdca123-c247-340f-96b0-96f4620c06eb","canChangeBackground":false}],"id":"welcome","$title":"[REQUIREMENTS]","$position":{"top":"68px","left":"1206px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8ae30a3b-2f45-4a9f-bd0a-4457bb2f6f35","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"686160de-8345-4385-8bb4-de9ae1521925","$typeOfContent":"","type":"ExecuteScript","$title":"OBJEXCECAO","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetRedirectMessage}}\n\nconst run = (processedInput, lastStateWithInput, countException) => {\n    const destination = \"excecao\";\n    const origin = \"saudacao\";\n    return getRedirectMessage(destination, origin, processedInput, lastStateWithInput, countException);\n};","inputVariables":["processedInput","lastStateWithInput","countException"],"outputVariable":"objExcecao","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"938e439a-6de6-4319-b782-68fb370d7459","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false}],"id":"error","$title":"[SET] Object Exception","$position":{"top":"321px","left":"184px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"edc60f7c-28df-4f21-88b8-ca6088286e7d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"b7c6b9e6-c0be-4eb0-b8ea-fa82b4761c06","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF1E90","label":"Http","id":"blip-tag-aefc1f19-48e4-67a4-2d7d-c973d302eaf5","canChangeBackground":false},{"background":"#167491","label":"Event","id":"blip-tag-7fdca123-c247-340f-96b0-96f4620c06eb","canChangeBackground":false},{"background":"#4F0E87","label":"SetContact","id":"blip-tag-f9943d94-9a3b-d32b-4181-d3fead0d17be","canChangeBackground":false},{"background":"#61D36F","label":"Redirect","id":"blip-tag-faafc359-f558-6880-b0c8-a73f06d80bcb","canChangeBackground":false},{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false},{"background":"#FF4A1E","label":"SetVariable","id":"blip-tag-458cd3fe-cadf-f31e-cc42-66d836c74748","canChangeBackground":false},{"background":"#B2B229","label":"Menu","id":"blip-tag-e3d38186-9649-bb13-1c3c-4a1a2ca8c911","canChangeBackground":false},{"background":"#FFEC03","label":"GoTo","id":"blip-tag-acaeeeb9-8edb-b4f6-18b1-3ec3103da0c2","canChangeBackground":false},{"background":"#CC99FF","label":"UserInput","id":"blip-tag-a135d488-0fbf-29bd-714f-f3388ee2d198","canChangeBackground":false},{"background":"#6E7B91","label":"Medias","id":"blip-tag-fb3882d7-1587-f159-082b-d51beea5cced","canChangeBackground":false},{"background":"#0747A6","label":"ContentAssistant","id":"blip-tag-05e38f88-08c5-6e43-5646-40b1300a7a93","canChangeBackground":false},{"background":"#000000","label":"Mask","id":"blip-tag-29ea3b19-027a-d79e-1c03-75d083143911","canChangeBackground":false}],"id":"edc60f7c-28df-4f21-88b8-ca6088286e7d","$title":"Tags","$position":{"top":"49px","left":"180px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"569fa51e-a644-4391-b5be-8f80b31cc1f8":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"53b7b68d-9d3e-4a40-8f8e-237865176108","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"54588fe9-f78f-4e46-a91d-c93fc64f2c5d","$typeOfContent":"","type":"TrackEvent","$title":"Exibicao","$invalid":false,"settings":{"extras":{},"category":"Exibicao","action":"Exibicao"},"conditions":[]},{"$id":"2179ef58-8150-40a1-917d-5efba8017c85","$typeOfContent":"","type":"ProcessContentAssistant","$title":"Consultar Assistente de conteúdo","$invalid":false,"settings":{"outputVariable":"contentAssistant","text":"{{input.content}}","score":"50"},"conditions":[]},{"$id":"632e55c3-d7e1-456a-921b-97d81e69ade9","$typeOfContent":"","type":"ExecuteScript","$title":"PROCESS INPUT","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetOptionSelected}}\n\nconst run = (selected, inputType, intent, platform, apiName, contentAssistant) => {\n    intent = (typeof intent !== 'undefined') ? intent : 'None';\n    platform = (typeof platform !== 'undefined') ? platform : 'BlipChat';\n    apiName = (typeof apiName !== 'undefined') ? apiName : false;\n    contentAssistant = (typeof contentAssistant !== 'undefined') ? contentAssistant : null;\n\n    const itens = [\n        {\n            name: [],\n        },\n    ];\n\n    let validation = {\n        'menuDinamic': true,\n        'isInputNoValidate': false,\n        'isTrueFalse': false,\n        'textLong': false,\n        'intentValidate': false,\n        'isIntent': false,\n        'isOptionMenu': false,\n        'contentAssistant': false,\n        'shortcutMenu': false,\n        'shortcut': false,\n        'badWord': false,\n        'NPS': false,\n        'Email': false,\n        'Cep': false,\n        'Telefone': false,\n        'Celular': false,\n        'CNPJ': false,\n        'CNPJValido': false,\n        'CPF': false,\n        'CPFValido': false,\n        'Quantidade': false,\n        'Data': false,\n        'Numero': false,\n        'Nome': false,\n        'Serial': false,\n        'Pedido': false,\n        'Id': false\n    };\n\n    if (platform === 'WhatsApp') {\n        validation.menuDinamic = false;\n    }\n\n    const mainMenus = [\n        {\n            name: [],\n        },\n    ];\n\n    const shortcuts = [\n        {\n            name: [],\n        },\n    ];\n\n    const selectResponse = getOptionSelected(\n        selected,\n        inputType,\n        itens,\n        validation,\n        intent,\n        mainMenus,\n        shortcuts,\n        apiName,\n        contentAssistant\n    );\n\n    return selectResponse;\n};","inputVariables":["input.content","input.type","input.intent.name","platform"],"outputVariable":"processedInput","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"13ee6d22-d016-43d5-b2a2-b8bfd5f9a2e7","$typeOfContent":"","type":"ExecuteScript","$title":"LAST STATE WITH INPUT","$invalid":false,"settings":{"function":"run","source":"{{resource.utilGetLastStateWithInput}}\n\nfunction run(stateName, stateId, lastStateWithInputCurrent) {\n    return getLastStateWithInput(stateName, stateId, lastStateWithInputCurrent);\n}","inputVariables":["state.name","state.id","lastStateWithInput"],"outputVariable":"lastStateWithInput","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"notEquals","variable":"state.id","values":["onboarding"]}]},{"$id":"15571201-6177-4b06-aba5-6b01ad89700b","$typeOfContent":"","type":"ExecuteScript","$title":"COUNT EXCEPTION","$invalid":false,"settings":{"function":"run","source":"{{resource.utilGetCountException}}\n\nfunction run(countExceptionCurrent, lastStateWithInput) {\n    return getCountException(countExceptionCurrent, lastStateWithInput);\n}","inputVariables":["countException","lastStateWithInput"],"outputVariable":"countException","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"notEquals","variable":"state.id","values":["onboarding"]}]}],"$leavingCustomActions":[{"$id":"abbfe83f-66e6-4606-8d9a-c8a8ec60f400","$typeOfContent":"","type":"SetVariable","$title":"Definir variável","$invalid":false,"settings":{"variable":"nomeDesejado","value":"{{processedInput@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["menu_return"]}]},{"$id":"ce4c3837-16cd-4d83-8657-621d532cc7e3","$typeOfContent":"","type":"MergeContact","$title":"Definir contato","$invalid":false,"settings":{"extras":{}},"conditions":[]},{"$id":"bc625da4-a3a1-4fb6-b42b-42cb2a9969b5","$typeOfContent":"","type":"TrackEvent","$title":"selecao","$invalid":false,"settings":{"extras":{},"category":"selecao","action":"{{processedInput@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["menu_return"]}]},{"$id":"3960ef51-a52f-409d-8f25-e50cb9b26bd6","$typeOfContent":"","type":"TrackEvent","$title":"inesperado","$invalid":false,"settings":{"extras":{},"category":"inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["block_return"]}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false},{"background":"#167491","label":"Event","id":"blip-tag-7fdca123-c247-340f-96b0-96f4620c06eb","canChangeBackground":false},{"background":"#4F0E87","label":"SetContact","id":"blip-tag-f9943d94-9a3b-d32b-4181-d3fead0d17be","canChangeBackground":false},{"background":"#0747A6","label":"ContentAssistant","id":"blip-tag-05e38f88-08c5-6e43-5646-40b1300a7a93","canChangeBackground":false},{"background":"#FF4A1E","label":"SetVariable","id":"blip-tag-458cd3fe-cadf-f31e-cc42-66d836c74748","canChangeBackground":false}],"id":"569fa51e-a644-4391-b5be-8f80b31cc1f8","root":false,"$title":"[Val]","$position":{"top":"56px","left":"565px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"eb08415f-fd9e-4d4f-8953-24feb9b24e63":{"$contentActions":[{"action":{"$id":"00899f32-1a74-42c0-aed9-cbbafd963333","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"25bb9af9-ef7c-43ab-a3a5-b3b2044ced08","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"25bb9af9-ef7c-43ab-a3a5-b3b2044ced08","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"4a1fae49-0bb7-42cd-ac6c-803dee364593","$typeOfContent":"raw-content","type":"SendRawMessage","settings":{"metadata":{},"type":"{{objMenu@type}}","rawContent":"{{objMenu@content}}"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"0a31399a-672b-40ef-99f3-bebd69f7649a","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"expiration":"2:0"},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"a8a4954c-54c7-46e6-abc9-ffc1e93ba3ed","$typeOfContent":"","type":"ExecuteScript","$title":"DEFINIR MENU","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetMenu}}\n\nconst run = (platform, boldValue, italicValue) => {\n    let convertPlatform = platform.toLowerCase();\n    let convertBold = boldValue;\n    if (typeof boldValue === typeof toString()) {\n        convertBold = JSON.parse(boldValue);\n    }\n    let convertItalic = italicValue;\n    if (typeof italicValue === typeof toString()) {\n        convertItalic = JSON.parse(italicValue);\n    }\n\n    const default_msg = {\n        \"whatsapp\": {\n            \"button\": {\n                \"active\": false,\n                \"header\": '',\n                \"body\": '',\n                \"options\": [],\n                \"footer\": ''\n            },\n            \"list\": {\n                \"active\": false,\n                \"header\": '',\n                \"body\": '',\n                \"button\": '',\n                \"title\": '',\n                \"options\": [],\n                \"description\": [],\n                \"footer\": ''\n            },\n            \"template\": {\n                \"active\": false,\n                \"codeTemplate\": \"\",\n                \"nameTemplate\": \"\",\n                \"idiomTemplate\": \"pt_BR\"\n            },\n            \"image\": {\n                \"active\": false,\n                \"url\": '',\n                \"body\": '',\n                \"options\": [],\n                \"footer\": ''\n            }\n        },\n        \"blipchat\": {\n            \"quickReplay\": {\n                \"active\": false,\n                \"addNumber\": false,\n                \"separated\": \"\",\n                \"text\": '',\n                \"options\": [],\n                \"values\": []\n            },\n            \"menu\": {\n                \"active\": false,\n                \"addNumber\": false,\n                \"separated\": \"\",\n                \"text\": '',\n                \"options\": [],\n                \"values\": []\n            }\n        },\n        \"default\": {\n            \"text\": {\n                \"active\": false,\n                \"addNumber\": true,\n                \"separated\": \"\",\n                \"text\": '',\n                \"options\": []\n            },\n            \"textMenu\": {\n                \"active\": false,\n                \"addNumber\": true,\n                \"separated\": \"\",\n                \"text\": '',\n                \"init\": 0,\n                \"subMenuModValue\": false,\n                \"subMenuValues\": [],\n                \"options\": [],\n                \"subMenu\": []\n            }\n        },\n        \"config\": {\n            \"platform\": convertPlatform,\n            \"activeBold\": false,\n            \"boldValue\": convertBold,\n            \"activereplaceBold\": false,\n            \"replaceBold\": {\n                \"open\": \"%%%\",\n                \"close\": \"@@@\"\n            },\n            \"activeItalic\": false,\n            \"italicValue\": convertItalic,\n            \"activereplaceItalic\": false,\n            \"replaceItalic\": {\n                \"open\": \"###\",\n                \"close\": \"&&&\"\n            },\n            \"BreakLine\": '\\n',\n            \"replaceBreakLine\": '---',\n            \"replaceToBreakLine\": '___'\n        }\n    };\n\n    return getMenuForPlatform(default_msg);\n};","inputVariables":["platform","boldValue","italicValue"],"outputVariable":"objMenu","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#B2B229","label":"Menu","id":"blip-tag-e3d38186-9649-bb13-1c3c-4a1a2ca8c911","canChangeBackground":false},{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false},{"background":"#CC99FF","label":"UserInput","id":"blip-tag-a135d488-0fbf-29bd-714f-f3388ee2d198","canChangeBackground":false}],"id":"eb08415f-fd9e-4d4f-8953-24feb9b24e63","root":false,"$title":"MENU","$position":{"top":"54px","left":"375px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"664a3e2b-386b-4b5d-837d-2c30f115f814":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8d988df5-379e-4cb6-b19c-bc898e85ad9b","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"c4d58110-eea2-406c-a3a6-12fe4fa88165","$typeOfContent":"","type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"address":"{{redirectMenu}}","context":{"type":"text/plain","value":"{{redirectMessage}}"}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#61D36F","label":"Redirect","id":"blip-tag-faafc359-f558-6880-b0c8-a73f06d80bcb","canChangeBackground":false}],"id":"664a3e2b-386b-4b5d-837d-2c30f115f814","root":false,"$title":"[REDIRECT TO] Redirect Solution","$position":{"top":"657px","left":"176px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"938e439a-6de6-4319-b782-68fb370d7459":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"633bba87-2411-4a81-a17d-7391a9f2fcba","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"980460e5-0a9f-4ae4-be2a-c91f3ec1c94e","$typeOfContent":"","type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{objExcecao}}"},"address":"excecao"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#61D36F","label":"Redirect","id":"blip-tag-faafc359-f558-6880-b0c8-a73f06d80bcb","canChangeBackground":false}],"id":"938e439a-6de6-4319-b782-68fb370d7459","root":false,"$title":"[REDIRECT TO] excecao","$position":{"top":"459px","left":"184px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"d6c106f7-8bbd-411d-b155-7921b83cfe42":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"ea21f780-9489-42f1-8289-59fe2b89bf53","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"a63e6dd9-fd44-4354-870c-b5febeb92af9","$typeOfContent":"","type":"SetVariable","$title":"DESTINO","$invalid":false,"settings":{"variable":"destino","expiration":40,"value":"{{objExcecao@stateOrigin}}"},"conditions":[]}],"$leavingCustomActions":[{"$id":"6f85b71e-6d33-4139-aee3-f5e7a6a69cb7","$typeOfContent":"","type":"ExecuteScript","$title":"objExcecao","$invalid":false,"settings":{"function":"run","source":"const run = () => {\n    return {     \n        'destination': \"\",     \n        'origin': \"\",     \n        'inputContent': \"\",     \n        'inputType': \"\",     \n        'stateDestination': \"\",     \n        'stateOrigin': \"\"   \n    }\n}","inputVariables":[],"outputVariable":"objExcecao"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#FF4A1E","label":"SetVariable","id":"blip-tag-458cd3fe-cadf-f31e-cc42-66d836c74748","canChangeBackground":false},{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false}],"id":"d6c106f7-8bbd-411d-b155-7921b83cfe42","root":false,"$title":"Return Exception","$position":{"top":"71px","left":"1590px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"26ad46ae-40e9-467f-9e8a-74f534e5a14d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"4af926a2-ee8b-4cef-8c89-b39aabb52753","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FFEC03","label":"GoTo","id":"blip-tag-acaeeeb9-8edb-b4f6-18b1-3ec3103da0c2","canChangeBackground":false}],"id":"26ad46ae-40e9-467f-9e8a-74f534e5a14d","root":false,"$title":"[GO TO]","$position":{"top":"56px","left":"752px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"f8889c55-0477-4464-a0a6-1141f90e1cb4":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"4af926a2-ee8b-4cef-8c89-b39aabb52753","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"2ed26fcb-c649-43c5-8dc8-845c29b174ac","$typeOfContent":"","type":"SetVariable","$title":"Redirect Solution","$invalid":false,"settings":{"variable":"redirectMenu"},"conditions":[]},{"$id":"4119bb17-1735-4d67-a58b-46e216376921","$typeOfContent":"","type":"SetVariable","$title":"Redirect Message","$invalid":false,"settings":{"variable":"redirectMessage"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"664a3e2b-386b-4b5d-837d-2c30f115f814","$invalid":false},"$tags":[{"background":"#FFEC03","label":"GoTo","id":"blip-tag-acaeeeb9-8edb-b4f6-18b1-3ec3103da0c2","canChangeBackground":false},{"background":"#FF4A1E","label":"SetVariable","id":"blip-tag-458cd3fe-cadf-f31e-cc42-66d836c74748","canChangeBackground":false}],"id":"f8889c55-0477-4464-a0a6-1141f90e1cb4","root":false,"$title":"[GO TO]","$position":{"top":"169px","left":"752px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"da9c0ab0-b985-4135-869e-9578b86ea177":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8d988df5-379e-4cb6-b19c-bc898e85ad9b","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"c4d58110-eea2-406c-a3a6-12fe4fa88165","$typeOfContent":"","type":"Redirect","$title":"Redirecionar a um serviço","$invalid":false,"settings":{"address":"{{redirectMenu}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[{"background":"#61D36F","label":"Redirect","id":"blip-tag-faafc359-f558-6880-b0c8-a73f06d80bcb","canChangeBackground":false}],"id":"da9c0ab0-b985-4135-869e-9578b86ea177","root":false,"$title":"[REDIRECT TO] Redirect Solution Principal","$position":{"top":"794px","left":"175px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"bcba8755-4417-4ea3-be43-1abe7856b176":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"53b7b68d-9d3e-4a40-8f8e-237865176108","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"d3b7c802-1dc6-4a2a-8b09-78302093870b","$typeOfContent":"","type":"TrackEvent","$title":"Exibicao","$invalid":false,"settings":{"extras":{},"category":"Exibicao","action":"Exibicao"},"conditions":[]},{"$id":"1b3f17bb-aa6c-4aa8-b2d0-f6263ba724ee","$typeOfContent":"","type":"ProcessContentAssistant","$title":"Consultar Assistente de conteúdo","$invalid":false,"settings":{"text":"{{input.content}}","outputVariable":"contentAssistant","score":"50"},"conditions":[]},{"$id":"632e55c3-d7e1-456a-921b-97d81e69ade9","$typeOfContent":"","type":"ExecuteScript","$title":"PROCESS INPUT","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionGetOptionSelected}}\n\nconst run = (selected, inputType, intent, platform, apiName, contentAssistant) => {\n    intent = (typeof intent !== 'undefined') ? intent : 'None';\n    platform = (typeof platform !== 'undefined') ? platform : 'BlipChat';\n    apiName = (typeof apiName !== 'undefined') ? apiName : false;\n    contentAssistant = (typeof contentAssistant !== 'undefined') ? contentAssistant : null;\n\n    const itens = [\n        {\n            name: [],\n        },\n    ];\n\n    let validation = {\n        'menuDinamic': true,\n        'isInputNoValidate': false,\n        'isTrueFalse': false,\n        'textLong': false,\n        'intentValidate': false,\n        'isIntent': false,\n        'isOptionMenu': false,\n        'contentAssistant': false,\n        'shortcutMenu': false,\n        'shortcut': false,\n        'badWord': false,\n        'NPS': false,\n        'Email': false,\n        'Cep': false,\n        'Telefone': false,\n        'Celular': false,\n        'CNPJ': false,\n        'CNPJValido': false,\n        'CPF': false,\n        'CPFValido': false,\n        'Quantidade': false,\n        'Data': false,\n        'Numero': false,\n        'Nome': false,\n        'Serial': false,\n        'Pedido': false,\n        'Id': false\n    };\n\n    if (platform === 'WhatsApp') {\n        validation.menuDinamic = false;\n    }\n\n    const mainMenus = [\n        {\n            name: [],\n        },\n    ];\n\n    const shortcuts = [\n        {\n            name: [],\n        },\n    ];\n\n    const selectResponse = getOptionSelected(\n        selected,\n        inputType,\n        itens,\n        validation,\n        intent,\n        mainMenus,\n        shortcuts,\n        apiName,\n        contentAssistant\n    );\n\n    return selectResponse;\n};","inputVariables":["input.content","input.type","input.intent.name","platform"],"outputVariable":"processedInput","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"13ee6d22-d016-43d5-b2a2-b8bfd5f9a2e7","$typeOfContent":"","type":"ExecuteScript","$title":"LAST STATE WITH INPUT","$invalid":false,"settings":{"function":"run","source":"{{resource.utilGetLastStateWithInput}}\n\nfunction run(stateName, stateId, lastStateWithInputCurrent) {\n    return getLastStateWithInput(stateName, stateId, lastStateWithInputCurrent);\n}","inputVariables":["state.name","state.id","lastStateWithInput"],"outputVariable":"lastStateWithInput","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"notEquals","variable":"state.id","values":["onboarding"]}]},{"$id":"15571201-6177-4b06-aba5-6b01ad89700b","$typeOfContent":"","type":"ExecuteScript","$title":"COUNT EXCEPTION","$invalid":false,"settings":{"function":"run","source":"{{resource.utilGetCountException}}\n\nfunction run(countExceptionCurrent, lastStateWithInput) {\n    return getCountException(countExceptionCurrent, lastStateWithInput);\n}","inputVariables":["countException","lastStateWithInput"],"outputVariable":"countException","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"notEquals","variable":"state.id","values":["onboarding"]}]}],"$leavingCustomActions":[{"$id":"b8dc3b43-4249-4e0e-b1db-fb0e2dea7e85","$typeOfContent":"","type":"ExecuteScript","$title":"APPLY MASK","$invalid":false,"settings":{"function":"run","source":"{{resource.FunctionMaskFormat}}\n\nconst run = (input) => {\n    const validacao = {\n        \"Cep\": false,\n        \"Telefone\": false,\n        \"Celular\": false,\n        \"CNPJ\": false,\n        \"CPF\": false,\n        \"Data\": false,\n        \"Hora\": false,\n        \"Numero\": false,\n        \"Placa\": false\n    };\n\n    return setMaskFormat(input, validacao);\n};","inputVariables":["input.content"],"outputVariable":"maskInput"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["no_validation"]}]},{"$id":"208ff8fa-24cd-4411-889d-8e9a0ef13b7a","$typeOfContent":"","type":"SetVariable","$title":"Save Data Mask","$invalid":false,"settings":{"value":"{{maskInput}}","variable":"nome"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["no_validation"]}]},{"$id":"106e11ab-2dae-4290-b9b1-da2a4485a0e7","$typeOfContent":"","type":"TrackEvent","$title":"selecao","$invalid":false,"settings":{"extras":{},"category":"selecao","action":"{{processedInput@input}}"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["menu_return"]}]},{"$id":"44e2491f-7af6-44bc-841b-eb0daa1384e5","$typeOfContent":"","type":"TrackEvent","$title":"inesperado","$invalid":false,"settings":{"extras":{},"category":"inesperado","action":"{{input.content}}"},"conditions":[{"source":"context","comparison":"equals","variable":"processedInput@inputRecognized","values":["block_return"]}]},{"$id":"dac5e96e-26c0-47e7-ae52-1b26c5636828","$typeOfContent":"","type":"MergeContact","$title":"Definir contato","$invalid":false,"settings":{"extras":{}},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"ExecuteScript","id":"blip-tag-13730057-a7af-4307-f591-44893325fd9e","canChangeBackground":false},{"background":"#FF4A1E","label":"SetVariable","id":"blip-tag-458cd3fe-cadf-f31e-cc42-66d836c74748","canChangeBackground":false},{"background":"#000000","label":"Mask","id":"blip-tag-29ea3b19-027a-d79e-1c03-75d083143911","canChangeBackground":false},{"background":"#167491","label":"Event","id":"blip-tag-7fdca123-c247-340f-96b0-96f4620c06eb","canChangeBackground":false},{"background":"#4F0E87","label":"SetContact","id":"blip-tag-f9943d94-9a3b-d32b-4181-d3fead0d17be","canChangeBackground":false},{"background":"#0747A6","label":"ContentAssistant","id":"blip-tag-05e38f88-08c5-6e43-5646-40b1300a7a93","canChangeBackground":false}],"id":"bcba8755-4417-4ea3-be43-1abe7856b176","root":false,"$title":"[Val] [MASK]","$position":{"top":"166px","left":"566px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"bed3fe99-6aad-43be-a0fa-6e0d8640a006":{"$contentActions":[{"action":{"$id":"1d526f7e-42f3-48b1-9fe8-e2d5cfa2b4da","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"cbdcd378-4676-4a03-9795-599dab4eeb0e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"cbdcd378-4676-4a03-9795-599dab4eeb0e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"9745033f-05f0-4595-bf56-f59bf328e997","$typeOfContent":"text","type":"SendMessage","settings":{"id":"72080bd5-62b6-4694-b4e5-cba972e5c0e5","type":"text/plain","content":"Some text"},"$cardContent":{"document":{"id":"72080bd5-62b6-4694-b4e5-cba972e5c0e5","type":"text/plain","content":"Some text"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"b5e80ff0-be30-4c1a-b51e-636f52362c6d","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#CC99FF","label":"UserInput","id":"blip-tag-a135d488-0fbf-29bd-714f-f3388ee2d198","canChangeBackground":false}],"id":"bed3fe99-6aad-43be-a0fa-6e0d8640a006","root":false,"$title":"Input","$position":{"top":"165px","left":"378px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalAction":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}